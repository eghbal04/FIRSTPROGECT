<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>CONTINUOUS PROFIT ACADEMY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/index-custom.css">
    <link rel="stylesheet" href="css/floating-ai-assistant.css">
    <link rel="stylesheet" href="css/smooth-transitions.css">

    <!-- ุจุงุฑฺฏุฐุงุฑ ethers.js ูุณุฎู 6 ุงุฒ CDN -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.10.0/dist/ethers.umd.min.js"></script>
    <!-- ุจุงุฑฺฏุฐุงุฑ WalletConnect Provider ุงุฒ CDN ุฑุณู -->
    <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
    <!-- ุจุงุฑฺฏุฐุงุฑ WalletConnect Handler -->
    <script src="js/walletconnect-handler.js?v=5.7"></script>

      <!-- ุจุงุฑฺฏุฐุงุฑ WalletConnect UMD ุจู ุตูุฑุช ููฺฉุงู -->
  <script src="js/walletconnect-v1.8.0.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
  
  <!-- ุจุงุฑฺฏุฐุงุฑ ุฏุงูุด ูพุงู ูุฑุงุฑุฏุงุฏ -->
  <!-- <script src="js/contract-knowledge-base.js"></script> -->
  
  <!-- ุจุงุฑฺฏุฐุงุฑ Floating AI Assistants -->
  <!-- <script src="js/floating-ai-assistant.js"></script> -->
  
  <!-- Immediate AI Assistant Initialization -->
  <!--
  <script>
    // Force immediate initialization
    document.addEventListener('DOMContentLoaded', function() {
      console.log('๐ DOM Content Loaded - Initializing AI Assistant...');

      setTimeout(() => {
        // ููุท ุฏุณุชุงุฑ ูพุดุฑูุชู ุฑุง ููุฏุงุฑุฏู ฺฉู
        if (typeof FloatingAIAssistant !== 'undefined') {
          console.log('โ FloatingAIAssistant class found');

          if (!window.floatingAI) {
            console.log('๐ Creating new FloatingAIAssistant instance...');
            window.floatingAI = new FloatingAIAssistant();
          }
          
          if (window.floatingAI) {
            console.log('โ FloatingAI instance ready');
            window.floatingAI.switchToIdleState();
          }
        } else {
          console.error('โ FloatingAIAssistant class not found');
        }
      }, 1000);
    });
  </script>
  -->
  
  <!-- Test script for floating AI -->

</head>
<body>
  <div id="online-session-bubble" style="display:none;">
    <span class="bubble-text">ุฌูุณู ุขููุงู ุฏุฑ ุญุงู ุจุฑฺฏุฒุงุฑ ุงุณุช! ๐</span>
    <span class="bubble-timer" id="bubble-timer"></span>
    <a href="learning.html" class="bubble-link" target="_blank">ูุฑูุฏ ุจู ฺฉูุงุณ</a>
    <span class="bubble-close" id="bubble-close">ร</span>
  </div>
  <div id="bubble-mini" style="display:none;">
    <span class="bubble-mini-icon">๐</span>
  </div>


  <script>
    function formatCountdown(ms) {
      if (ms <= 0) return '00:00:00';
      let s = Math.floor(ms / 1000);
      let h = Math.floor(s / 3600);
      s = s % 3600;
      let m = Math.floor(s / 60);
      s = s % 60;
      return `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
    }
    function showSessionBubble() {
      const info = window.sessionInfo;
      if (!info || !info.active) return;
      const bubble = document.getElementById('online-session-bubble');
      const mini = document.getElementById('bubble-mini');
      const timer = document.getElementById('bubble-timer');
      const link = bubble.querySelector('.bubble-link');
      link.href = info.link || 'learning.html';
      bubble.style.display = 'flex';
      mini.style.display = 'none';
      // ุดูุงุฑุด ูุนฺฉูุณ
      function updateTimer() {
        const now = Date.now();
        if (now < info.startTime) {
          timer.textContent = 'ุดุฑูุน ุชุง ุฌูุณู: ' + formatCountdown(info.startTime - now);
        } else if (now < info.endTime) {
          timer.textContent = 'ุฒูุงู ุจุงูโูุงูุฏู: ' + formatCountdown(info.endTime - now);
        } else {
          timer.textContent = 'ุฌูุณู ุจู ูพุงุงู ุฑุณุฏ';
        }
      }
      updateTimer();
      window._bubbleTimerInterval = setInterval(updateTimer, 1000);
    }
    function hideSessionBubble() {
      document.getElementById('online-session-bubble').style.display = 'none';
      document.getElementById('bubble-mini').style.display = 'flex';
      if (window._bubbleTimerInterval) clearInterval(window._bubbleTimerInterval);
    }
    function showMiniBubble() {
      document.getElementById('bubble-mini').style.display = 'flex';
      document.getElementById('online-session-bubble').style.display = 'none';
    }
    function expandMiniBubble() {
      showSessionBubble();
    }
    // ุฑูุฏุงุฏ ุจุณุชู
    document.addEventListener('DOMContentLoaded', function() {
      if (window.sessionInfo && window.sessionInfo.active) {
        showSessionBubble();
      }
      document.getElementById('bubble-close').onclick = hideSessionBubble;
      document.getElementById('bubble-mini').onclick = expandMiniBubble;
    });
  </script>

  
  
  <div id="main-dashboard" class="page-section" style="position:relative;overflow:visible;">
    <div class="dashboard-cards" style="display:flex;justify-content:center;flex-wrap:wrap;gap:1rem;max-width:1400px;margin:0 auto;">
      <!-- AI Assistant will be inserted here by JavaScript -->

      <!-- Blockchain Information Cards -->
      <div class="dashboard-card" style="background:linear-gradient(135deg,#1a1f2e,#232946);border-radius:16px;box-shadow:0 4px 20px rgba(0,255,136,0.15);min-width:100%;max-width:100%;margin:1rem 0;width:100%;padding:1.5rem;position:relative;overflow:hidden;">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#00ff88,#a786ff,#00ff88);animation:shimmer 2s linear infinite;"></div>
        
        <div style="text-align:center;margin-bottom:1.5rem;">
          <h3 style="color:#00ff88;font-size:1.2rem;font-weight:bold;margin:0;font-family:monospace;">CONTINUOUS PROFIT ACADEMY</h3>
        </div>
        
        <!-- User Info Section -->
        <div id="dashboard-user-info" style="background:rgba(0,255,136,0.1);border-radius:12px;padding:1rem;margin-bottom:1rem;border:1px solid rgba(0,255,136,0.2);display:none;">
          <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:0.5rem;">
            <div style="text-align:center;flex:1;min-width:120px;">
                                  <div style="color:#00ff88;font-size:0.8rem;font-weight:bold;margin-bottom:0.3rem;">ุงูุฏฺฉุณ</div>
              <div style="color:#fff;font-size:1rem;font-family:monospace;font-weight:bold;" id="dashboard-user-index">-</div>
            </div>
            <div style="text-align:center;flex:1;min-width:120px;">
              <div style="color:#00ff88;font-size:0.8rem;font-weight:bold;margin-bottom:0.3rem;">ุขุฏุฑุณ ฺฉู ูพูู</div>
              <div style="color:#fff;font-size:0.9rem;font-family:monospace;" id="dashboard-user-address">-</div>
            </div>
            <div style="text-align:center;flex:1;min-width:120px;">
              <div style="color:#00ff88;font-size:0.8rem;font-weight:bold;margin-bottom:0.3rem;">ูุถุนุช</div>
              <div style="color:#00ff88;font-size:0.9rem;font-weight:bold;" id="dashboard-user-status">-</div>
            </div>
          </div>
        </div>
        
        <div style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;justify-content:center;">
          <!-- 1. ฺฉู ุนุฑุถู - ุงูููุช ุงูู -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(0,255,136,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#00ff88;font-size:1.2rem;margin-bottom:0.3rem;">๐ฐ</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ฺฉู ุนุฑุถู</div>
            <div style="color:#00ff88;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="circulating-supply" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">CPA Tokens</div>
          </div>
          
          <!-- 2. ููุฌูุฏ CPA ูุฑุงุฑุฏุงุฏ - ุงูููุช ุฏูู -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(255,193,7,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#ffc107;font-size:1.2rem;margin-bottom:0.3rem;">๐ฆ</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ููุฌูุฏ ูุฑุงุฑุฏุงุฏ</div>
            <div style="color:#ffc107;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="contract-token-balance" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">CPA in Contract</div>
          </div>
          
          <!-- 3. ููุฌูุฏ ูุฑุงุฑุฏุงุฏ DAI - ุงูููุช ุณูู -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(0,123,255,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#007bff;font-size:1.2rem;margin-bottom:0.3rem;">๐ต</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ููุฌูุฏ ูุฑุงุฑุฏุงุฏ</div>
            <div style="color:#007bff;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-dai-balance" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">Contract Balance</div>
          </div>
          
          <!-- 4. ููุช ุชูฺฉู - ุงูููุช ฺูุงุฑู -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(0,255,136,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#00ff88;font-size:1.2rem;margin-bottom:0.3rem;">๐ฒ</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ููุช ุชูฺฉู CPA</div>
            <div style="color:#00ff88;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-token-price" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">DAI per CPA</div>
          </div>
          
          <!-- 5. ููุช ุซุจุชโูุงู - ุงูููุช ูพูุฌู -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(138,43,226,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#8a2be2;font-size:1.2rem;margin-bottom:0.3rem;">๐ซ</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ููุช ุซุจุชโูุงู</div>
            <div style="color:#8a2be2;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-registration-price" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">CPA per Registration</div>
          </div>
          
          <!-- ุจูู ฺฉุงุฑุชโูุง -->
          
          <!-- Total Points Card -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(167,134,255,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#a786ff;font-size:1.2rem;margin-bottom:0.3rem;">๐ฏ</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ฺฉู ูพููุชโูุง</div>
            <div style="color:#a786ff;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="total-points" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">Binary Points</div>
          </div>
          
          <!-- Point Value Card -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(0,255,136,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#00ff88;font-size:1.2rem;margin-bottom:0.3rem;">๐</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ุงุฑุฒุด ูุฑ ูพููุช</div>
            <div style="color:#00ff88;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-point-value" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">CPA per Point</div>
          </div>
          
          <!-- Help Fund Card -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(220,53,69,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#dc3545;font-size:1.2rem;margin-bottom:0.3rem;">๐</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ุตูุฏูู ฺฉูฺฉ</div>
            <div style="color:#dc3545;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-cashback-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">Cashback Pool</div>
          </div>
          
          <!-- Wallet Count Card -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(255,165,0,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#ffa500;font-size:1.2rem;margin-bottom:0.3rem;">๐</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ุชุนุฏุงุฏ ููุชโูุง</div>
            <div style="color:#ffa500;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="dashboard-wallets-count" class="dashboard-value smooth-value-transition numeric-value">-</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">Connected Wallets</div>
          </div>
          
          <!-- Network Status Card -->
          <div style="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid rgba(40,167,69,0.2);text-align:center;min-width:140px;flex:1;max-width:180px;">
            <div style="color:#28a745;font-size:1.2rem;margin-bottom:0.3rem;">๐</div>
            <div style="color:#fff;font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;">ูุถุนุช ุดุจฺฉู</div>
            <div style="color:#28a745;font-size:0.9rem;font-family:monospace;font-weight:bold;" id="network-status">Polygon</div>
            <div style="color:#888;font-size:0.7rem;margin-top:0.2rem;">Active</div>
          </div>
        </div>
        
        <!-- Last Update Info -->
        <div style="text-align:center;margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,0.1);">
          <div style="color:#888;font-size:0.8rem;font-family:monospace;margin-bottom:0.5rem;">
            ุขุฎุฑู ุจุฑูุฒุฑุณุงู: <span id="blockchain-last-update">-</span>
          </div>
          <!-- ุฏฺฉูู ุจุฑูุฒุฑุณุงู ุญุฐู ุดุฏ -->
        </div>
        

      </div>

      <!-- Price Chart Section -->
      <div class="dashboard-card" id="price-chart-section" style="background:linear-gradient(135deg,#1a1f2e,#232946);border-radius:16px;box-shadow:0 4px 20px rgba(0,255,136,0.15);min-width:100%;max-width:100%;margin:1rem 0;width:100%;padding:1.5rem;position:relative;overflow:hidden;">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#00ff88,#a786ff,#00ff88);animation:shimmer 2s linear infinite;"></div>
        
        <!-- Current Prices Display -->
        <!-- ุญุฐู ุดุฏ: ููุงุด ููุช ุชูฺฉู ู ูพููุช -->

        <!-- Token Chart Controls -->
        <div style="display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-bottom:0.5rem;flex-wrap:wrap;">
          <select id="token-period-select" style="background:rgba(0,255,136,0.1);color:#00ff88;border:1px solid #00ff88;border-radius:6px;padding:0.4rem 1rem;font-size:0.9rem;font-family:monospace;cursor:pointer;">
            <option value="day">Day (24h)</option>
            <option value="week">Week (7d)</option>
            <option value="month">Month (30d)</option>
            <option value="year">Year (12m)</option>
          </select>
          <div style="text-align:center;padding:0.3rem 0.8rem;background:rgba(0,0,0,0.3);border-radius:6px;border:1px solid rgba(0,255,136,0.2);min-width:120px;">
            <div style="color:#00ff88;font-size:0.8rem;font-family:monospace;">Token Min: <span id="token-min-price" style="color:#fff;">-</span></div>
          </div>
          <div style="text-align:center;padding:0.3rem 0.8rem;background:rgba(0,0,0,0.3);border-radius:6px;border:1px solid rgba(0,255,136,0.2);min-width:120px;">
            <div style="color:#00ff88;font-size:0.8rem;font-family:monospace;">Token Max: <span id="token-max-price" style="color:#fff;">-</span></div>
          </div>
        </div>
        
        <!-- Token Chart Container -->
        <div style="background:rgba(0,0,0,0.3);border-radius:8px;padding:0.8rem;border:1px solid rgba(0,255,136,0.2);width:100%;max-width:100%;margin-bottom:1rem;">
          <div style="color:#00ff88;font-size:0.9rem;font-weight:bold;text-align:center;margin-bottom:0.3rem;font-family:monospace;">Token Price Chart</div>
          <canvas id="price-chart-canvas" style="width:100% !important;height:180px !important;border-radius:4px;max-width:100%;"></canvas>
        </div>
        
        <!-- Point Chart Controls -->
        <div style="display:flex;justify-content:center;align-items:center;gap:0.5rem;margin-bottom:0.5rem;flex-wrap:wrap;">
          <select id="point-period-select" style="background:rgba(167,134,255,0.1);color:#a786ff;border:1px solid #a786ff;border-radius:6px;padding:0.4rem 1rem;font-size:0.9rem;font-family:monospace;cursor:pointer;">
            <option value="day">Day (24h)</option>
            <option value="week">Week (7d)</option>
            <option value="month">Month (30d)</option>
            <option value="year">Year (12m)</option>
          </select>
          <div style="text-align:center;padding:0.3rem 0.8rem;background:rgba(0,0,0,0.3);border-radius:6px;border:1px solid rgba(167,134,255,0.2);min-width:120px;">
            <div style="color:#a786ff;font-size:0.8rem;font-family:monospace;">Point Min: <span id="point-min-price" style="color:#fff;">-</span></div>
          </div>
          <div style="text-align:center;padding:0.3rem 0.8rem;background:rgba(0,0,0,0.3);border-radius:6px;border:1px solid rgba(167,134,255,0.2);min-width:120px;">
            <div style="color:#a786ff;font-size:0.8rem;font-family:monospace;">Point Max: <span id="point-max-price" style="color:#fff;">-</span></div>
          </div>
        </div>
        
        <!-- Point Chart Container -->
        <div style="background:rgba(0,0,0,0.3);border-radius:8px;padding:0.8rem;border:1px solid rgba(167,134,255,0.2);width:100%;max-width:100%;">
          <div style="color:#a786ff;font-size:0.9rem;font-weight:bold;text-align:center;margin-bottom:0.3rem;font-family:monospace;">Point Value Chart</div>
          <canvas id="point-chart-canvas" style="width:100% !important;height:180px !important;border-radius:4px;max-width:100%;"></canvas>
        </div>
        

        

      </div>

      <!-- Buttons Row for Main Sections -->
      <!-- ุฏฺฉููโูุง ูพูุฌโฺฏุงูู ุญุฐู ุดุฏูุฏุ ููุท ููุงุฑ ูพุงู ูุนุงู ุงุณุช -->

      <!-- CPA Introduction Section -->
      <div class="cpa-intro-section" style="background:linear-gradient(135deg,#181c2a,#232946);border-radius:18px;box-shadow:0 4px 24px rgba(0,255,136,0.10);margin:2rem 0 1.5rem 0;padding:2.2rem 1.5rem;max-width:900px;width:100%;margin-left:auto;margin-right:auto;direction:rtl;">
        <h2 style="color:#00ff88;font-family:'Montserrat','Noto Sans Arabic',sans-serif;font-size:1.5rem;font-weight:bold;margin-bottom:1.2rem;text-align:center;">ุฏุฑุจุงุฑู ุขฺฉุงุฏู ุณูุฏ ูุณุชูุฑ (CPA)</h2>
        <div id="cpa-typewriter-wrapper" style="position:relative;max-height:2.1em;overflow:hidden;transition:max-height 0.5s cubic-bezier(.4,2,.6,1);">
          <div id="cpa-typewriter" style="color:#fff;font-size:1.08rem;line-height:2.1;text-align:justify;min-height:220px;"></div>
          <div id="cpa-fade" style="position:absolute;left:0;right:0;bottom:0;height:70px;background:linear-gradient(0deg,#181c2a 80%,rgba(35,41,70,0.01) 100%);pointer-events:none;transition:opacity 0.3s;"></div>
        </div>
        <div style="text-align:center;margin-top:1.2rem;">
          <button id="cpa-expand-btn" style="background:linear-gradient(90deg,#00ff88,#a786ff);color:#181c2a;font-weight:bold;border:none;border-radius:8px;padding:0.7rem 2.2rem;font-size:1rem;cursor:pointer;box-shadow:0 2px 12px rgba(0,255,136,0.10);transition:background 0.2s,box-shadow 0.2s;">ููุงุด ุจุดุชุฑ</button>
        </div>
      </div>
      <script>
      document.addEventListener('DOMContentLoaded', function() {
        const text = `ุขฺฉุงุฏู ุณูุฏ ูุณุชูุฑ (CPA) ฺฉ ุงฺฉูุณุณุชู ููุขูุฑุงูู ู ูุฑุฏูโูุญูุฑ ุงุณุช ฺฉู ุจุง ูุฏู ุงุฑุงุฆู ุฎุฏูุงุช ูุงูุ ุขููุฒุด ู ูุนุงููุงุช ฺฉุงููุงู ุบุฑูุชูุฑฺฉุฒ ู ุดูุงูุ ุจูุงู ููุงุฏู ุดุฏู ุงุณุช. ุฏุฑ ุงู ูุฌููุนูุ ุณุฑูุงู ุดูุง ููุดู ุฏุฑ ุงุฎุชุงุฑ ุฎูุฏุชุงู ุจุงู ูโูุงูุฏุ ฺู ุฏุฑ ุญุณุงุจ ุดุฎุตโุชุงู ุฏุฑ ุตุฑุงูุ ฺู ุฏุฑ ุจุฑูฺฉุฑุ ู ฺู ุฏุฑ ฺฉู ูพูู ููุดููุฏ ูุชุตู ุจู ูุฑุงุฑุฏุงุฏ ุบุฑูุชูุฑฺฉุฒ.\n\nุฎุฏูุงุช ูุง:\nโข ุงุฑุงุฆู ุณฺฏูุงูโูุง ุชุฎุตุต ู ุฑุจุงุชโูุง ุงุชูุชุฑุฏ ุจุฑุง ุจุงุฒุงุฑูุง ูุงู\nโข ุงูฺฉุงู ูุนุงูุช ุจู ุนููุงู ุงุฌูุช ุจุฑุง ุงูุฑุงุฏ ู IB ุฏุฑ ุจุฑูฺฉุฑูุง\nโข ุงูฺฉุงู ุจุงุฒุงุฑุงุจ ุดุจฺฉูโุง ุจุฑุง ุฏูุณุชุงู ฺฉู ูโุฎูุงููุฏ ุงู ูุฌููุนู ุฑุง ุงุฑุชูุง ุฏููุฏ\nโข ุดูุง ูโุชูุงูุฏ ุงุฒ ุณูุงูโูุง ูุนุฑู ุงูุฑุงุฏ (Referral Shares) ุจูุฑูโููุฏ ุดูุฏ.\nโข ููฺูู ูโุชูุงูุฏ ุจุง ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ุตูุฏูู CPA ู ุชูฺฉู ุงูุฒุงุด ุขูุ ุจู ุตูุฑุช ุชุถูู ุจู ุณูุฏ ุจุฑุณุฏ.\nโข ุขููุฒุดโูุง ุฌุงูุน ูุงุฑฺฉุณ ู ุงุฑุฒ ุฏุฌุชุงู\nโข ูพุดุชุจุงู ุงุฒ ุตูุฏูู ุบุฑูุชูุฑฺฉุฒ CPA ู ุชูฺฉู CPA\nโข ุฎุฏูุงุช ฺฉูพโุชุฑุฏ: ุงฺฏุฑ ุฑุจุงุช CPA ุณูุฏ ฺฉูุฏุ ุดูุง ูู ุณูุฏ ูโฺฉูุฏ ู ุงฺฏุฑ ุถุฑุฑ ฺฉูุฏุ ุดูุง ูุฒ ุถุฑุฑ ูโฺฉูุฏุ ูฺ ุณูุฏ ุงุฒ ุญุณุงุจ ุดูุง ุฏุฑ ุฒูุงู ุถุฑุฑ ุจุฑุฏุงุดุช ููโุดูุฏ ู ุชุง ุฌุจุฑุงู ุถุฑุฑุ CPA ุณูู ุฏุฑุงูุช ููโฺฉูุฏ.\nโข ุดุนุงุฑ ูุง: ุณุฑูุงูโุงุช ุฏุฑ ุญุณุงุจ ุฎูุฏุชุ ุณูุฏุช ูุงูุน ู ุดูุงู\n\nุตุฏุงูุชุ ุดูุงูุช ู ุฎุฏูุงุช ุตุฏุฏุฑุตุฏุ ุงุตูู ุจูุงุฏู ูุงุณุช. ูฺโฺฏุงู ุณุฑูุงู ุดูุง ุจู ุญุณุงุจ CPA ููุชูู ููโุดูุฏุ ุจูฺฉู ุดูุง ูููุงุฑู ฺฉูุชุฑู ฺฉุงูู ุฏุงุฑุง ุฎูุฏ ุฑุง ุฏุงุฑุฏ ู ุชููุง ุฏุฑ ุณูุฏ ูุงูุน ุดุฑฺฉ ูุณุชู. ุฏุฑ ุฏูุง ฺฉู ุจุณุงุฑ ุจู ุฏูุจุงู ุฌุฐุจ ุณุฑูุงู ูุฑุฏู ู ุงุฑุงุฆู ูุนุฏูโูุง ุชูุฎุงู ูุณุชูุฏุ ูุง ุฏุฑ CPA ุชููุง ุฒูุงู ุณูุฏ ูโุจุฑู ฺฉู ุดูุง ูุงูุนุงู ุณูุฏ ฺฉูุฏ ู ุฏุฑ ุฒุงูุ ุดุฑฺฉ ู ููุฑุงู ุดูุง ุฎูุงูู ุจูุฏ.\n\nCPAุ ุงูุชุฎุงุจ ุจุฑุง ุขูุฏูโุง ูุทูุฆูุ ุดูุงู ู ูุฑุฏูโูุญูุฑ.`;
        const container = document.getElementById('cpa-typewriter');
        let i = 0;
        let speed = 40; // ms per character (slower)
        function typeWriter() {
          if (i < text.length) {
            let char = text.charAt(i);
            if (char === '\\n' || char === '\n') {
              container.innerHTML += '<br>';
              i++;
              setTimeout(typeWriter, 350); // longer pause for line breaks
            } else {
              container.innerHTML += char;
              i++;
              setTimeout(typeWriter, speed);
            }
          }
        }
        typeWriter();

        // Expand/collapse logic
        const wrapper = document.getElementById('cpa-typewriter-wrapper');
        const fade = document.getElementById('cpa-fade');
        const btn = document.getElementById('cpa-expand-btn');
        let expanded = false;
        btn.addEventListener('click', function() {
          expanded = !expanded;
          if (expanded) {
            wrapper.style.maxHeight = '2000px';
            fade.style.opacity = '0';
            btn.textContent = 'ููุงุด ฺฉูุชุฑ';
          } else {
            wrapper.style.maxHeight = '2.1em';
            fade.style.opacity = '1';
            btn.textContent = 'ููุงุด ุจุดุชุฑ';
          }
        });
      });
      </script>

  <!-- Swap Section -->
  <div id="main-swap" class="page-section expandable-container" style="width:100vw;max-width:none;margin:0;left:0;right:0;padding:0.5rem 0;display:none;">
    <div class="expand-header" style="padding:0 1.5rem;">
      <h2 style="margin:0 0 0.5rem 0;">๐ ุชุจุฏู ุงุฑุฒ</h2>
      <p style="margin:0 0 0.5rem 0;">ุชุจุฏู ุจู ุชูฺฉูโูุง DAI ู CPA</p>
    </div>
    <div class="expand-content" style="padding:0;">
      <div class="swap-container" style="max-width:600px;margin:0 auto;padding:1.5rem;">
        
        <!-- Swap Rules and Information -->
        <div style="background:linear-gradient(135deg,#232946,#181c2a);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:2px solid #00ff88;">
          <h3 style="color:#00ff88;margin-bottom:1rem;font-size:1.2rem;">๐ ููุงูู ู ุฑุงูููุง ุชุจุฏู</h3>
          
          <div style="margin-bottom:1rem;">
            <h4 style="color:#00ff88;margin-bottom:0.5rem;">๐ ูุญูู ุชุจุฏู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li>โ <strong style="color:#00ff88;">DAI โ CPA:</strong> ุฎุฑุฏ ุชูฺฉู CPA ุจุง DAI (ูุฑุฎ ูุชุบุฑ)</li>
              <li>โ <strong style="color:#00ff88;">CPA โ DAI:</strong> ูุฑูุด ุชูฺฉู CPA ู ุฏุฑุงูุช DAI</li>
              <li>โ ฺฉุงุฑูุฒุฏ ุชุจุฏู: 2% ุงุฒ ูุจูุบ ุชุจุฏู</li>
              <li>โ ุญุฏุงูู ููุฏุงุฑ ุชุจุฏู: 1 DAI ุง 1 CPA</li>
            </ul>
          </div>
          
          <div style="margin-bottom:1rem;">
            <h4 style="color:#00ff88;margin-bottom:0.5rem;">๐ฐ ูุฒุงุง ุชุจุฏู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li><strong style="color:#00ff88;">CPA:</strong> ุชูฺฉู ุงุตู ูพูุชูุฑู - ุจุฑุง ุณุฑูุงูโฺฏุฐุงุฑ ู ฺฉุณุจ ุฏุฑุขูุฏ</li>
              <li><strong style="color:#00ccff;">DAI:</strong> ุชูฺฉู ุงุณุชุจู - ุจุฑุง ุญูุธ ุงุฑุฒุด ู ูุนุงููุงุช ุฑูุฒุงูู</li>
              <li>๐ ุชุจุฏู ููุฑ ู ุจุฏูู ูุงุฒ ุจู ุชุงุฏ ุงุถุงู</li>
              <li>๐ ูุฑุฎ ุชุจุฏู ุจุฑ ุงุณุงุณ ุนุฑุถู ู ุชูุงุถุง ูุญุงุณุจู ูโุดูุฏ</li>
            </ul>
          </div>
          
          <div>
            <h4 style="color:#00ff88;margin-bottom:0.5rem;">โ๏ธ ูฺฉุงุช ููู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li>๐ ูุจู ุงุฒ ุชุจุฏูุ ูุฑุฎ ูุนู ุฑุง ุจุฑุฑุณ ฺฉูุฏ</li>
              <li>๐ฐ ููุฌูุฏ ฺฉุงู ุจุฑุง ุชุจุฏู + ฺฉุงุฑูุฒุฏ ุฏุงุดุชู ุจุงุดุฏ</li>
              <li>โฑ๏ธ ุชุจุฏูโูุง ููุฑ ุงูุฌุงู ูโุดููุฏ</li>
              <li>๐ ุฏุฑ ุตูุฑุช ูุดฺฉู ุจุง ูพุดุชุจุงู ุชูุงุณ ุจฺฏุฑุฏ</li>
            </ul>
          </div>
        </div>
        <!-- ุฏุงุดุจูุฑุฏ ุงุทูุงุนุงุช ุจูุงฺฉฺู (ุงูุฒูุฏู ุดุฏู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุทุงูุง not found) -->

        <form id="swapForm" class="swap-form">
          <div class="swap-row">
            <label for="swapDirection">ููุน ุชุจุฏู:</label>
            <select id="swapDirection" required>
              <option value="dai-to-cpa">DAI โ CPA</option>
              <option value="cpa-to-dai">CPA โ DAI</option>
            </select>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุน ุชุจุฏู ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</small>
          </div>
          
          <div class="swap-row">
            <label for="swapAmount">ููุฏุงุฑ:</label>
            <div class="amount-input-group">
              <input type="number" id="swapAmount" placeholder="ููุฏุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ" min="0" step="any" required>
              <button type="button" id="maxBtn" class="max-btn">ุญุฏุงฺฉุซุฑ</button>
            </div>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุฏุงุฑ ููุฑุฏ ูุธุฑ ุจุฑุง ุชุจุฏู ุฑุง ูุงุฑุฏ ฺฉูุฏ</small>
          </div>
          
          <div class="swap-row" id="swap-usd-converter-row" style="display:none;">
            <label for="swapUsdAmount">๐ฐ ูุนุงุฏู ุฏูุงุฑ:</label>
            <div style="display:flex;gap:0.5rem;align-items:center;">
              <span style="color:#00ff88;font-weight:bold;">$</span>
              <input type="number" id="swapUsdAmount" placeholder="5.00" min="0" step="0.01" style="flex:1;">
              <button type="button" id="swapUsdToTokenBtn" style="
                background: linear-gradient(90deg,#00ff88,#a786ff);
                color: #181c2a;
                border: none;
                border-radius: 6px;
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
              ">๐ ุชุจุฏู</button>
            </div>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุฏุงุฑ ุฏูุงุฑ ูุงุฑุฏ ฺฉูุฏ ุชุง ุจู ุชูฺฉู ุชุจุฏู ุดูุฏ (ูุซู: 5 ุจุฑุง $5)</small>
          </div>
          
          <div id="swapRate" class="swap-rate">ูุฑุฎ ุชุจุฏู: ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</div>
          <div id="swapPreview" class="swap-preview"></div>
          <div id="swapLimitInfo" class="swap-limit-info" style="margin-top:0.5rem;color:#555;font-size:0.98em;"></div>
          
          <button type="submit" class="swap-btn">ุชุจุฏู</button>
          <div id="swapStatus" class="swap-status"></div>
        </form>
        
        <!-- Balance Check -->
        <div style="background:rgba(0,255,136,0.1);border-radius:8px;padding:1rem;margin-top:1.5rem;">
          <h4 style="color:#00ff88;margin-bottom:0.8rem;">๐ฐ ููุฌูุฏ ูุนู ุดูุง:</h4>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;">
            <div style="text-align:center;">
              <div style="color:#00ff88;font-weight:bold;">DAI</div>
              <div id="daiBalance" style="color:#b8c1ec;font-family:monospace;">-</div>
            </div>
            <div style="text-align:center;">
              <div style="color:#00ccff;font-weight:bold;">CPA</div>
              <div id="cpaBalance" style="color:#b8c1ec;font-family:monospace;">-</div>
              <div id="cpaUsdValue" style="color:#a786ff;font-size:0.8rem;margin-top:2px;">-</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Transfer Section -->
  <div id="main-transfer" class="page-section expandable-container" style="width:100vw;max-width:none;margin:0;left:0;right:0;padding:0.5rem 0;display:none;">
    <div class="expand-header">
      <h2 style="margin:0 0 0.5rem 0;">๐ธ ุชุฑุงูุณูุฑ</h2>
      <p style="margin:0 0 0.5rem 0;">ุงูุชูุงู ุชูฺฉู ุจู ฺฉู ูพูู ุฏฺฏุฑ</p>
    </div>
    <div class="expand-content" style="padding:0;">
      <div class="transfer-container" style="max-width:600px;margin:0 auto;padding:1.5rem;">
        
        <!-- Transfer Rules and Information -->
        <div style="background:linear-gradient(135deg,#232946,#181c2a);border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;border:2px solid #a786ff;">
          <h3 style="color:#00ff88;margin-bottom:1rem;font-size:1.2rem;">๐ ููุงูู ู ุฑุงูููุง ุงูุชูุงู</h3>
          
          <div style="margin-bottom:1rem;">
            <h4 style="color:#a786ff;margin-bottom:0.5rem;">๐ ุงููุช ุงูุชูุงู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li>โ ุงูุชูุงูโูุง ุบุฑูุงุจู ุจุงุฒฺฏุดุช ูุณุชูุฏ - ูุจู ุงุฒ ุงุฑุณุงู ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉูุฏ</li>
              <li>โ ุขุฏุฑุณ ููุตุฏ ุฑุง ุจุง ุฏูุช ูุงุฑุฏ ฺฉูุฏ - ฺฉ ฺฉุงุฑุงฺฉุชุฑ ุงุดุชุจุงู ุจุงุนุซ ุงุฒ ุฏุณุช ุฑูุชู ุฏุงุฑุง ูโุดูุฏ</li>
              <li>โ ุงุจุชุฏุง ููุฏุงุฑ ฺฉู ุงุฑุณุงู ฺฉูุฏ ุชุง ุงุฒ ุตุญุช ุขุฏุฑุณ ูุทูุฆู ุดูุฏ</li>
              <li>โ ุงุฒ ฺฉู ูพููโูุง ูุนุชุจุฑ ู ุงูู ุงุณุชูุงุฏู ฺฉูุฏ</li>
            </ul>
          </div>
          
          <div style="margin-bottom:1rem;">
            <h4 style="color:#a786ff;margin-bottom:0.5rem;">๐ฐ ุงููุงุน ุชูฺฉู ูุงุจู ุงูุชูุงู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li><strong style="color:#00ff88;">DAI:</strong> ุชูฺฉู ุงุณุชุจู ุจุง ุงุฑุฒุด 1 ุฏูุงุฑ - ุจุฑุง ูุนุงููุงุช ุฑูุฒุงูู</li>
              <li><strong style="color:#a786ff;">POL (MATIC):</strong> ุชูฺฉู ุดุจฺฉู Polygon - ุจุฑุง ูพุฑุฏุงุฎุช ฺฉุงุฑูุฒุฏ ุชุฑุงฺฉูุดโูุง</li>
              <li><strong style="color:#00ccff;">CPA:</strong> ุชูฺฉู ุงุตู ูพูุชูุฑู - ุจุฑุง ุณุฑูุงูโฺฏุฐุงุฑ ู ฺฉุณุจ ุฏุฑุขูุฏ</li>
            </ul>
          </div>
          
          <div style="margin-bottom:1rem;">
            <h4 style="color:#a786ff;margin-bottom:0.5rem;">โก ฺฉุงุฑูุฒุฏ ุชุฑุงฺฉูุด:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li>๐ธ ฺฉุงุฑูุฒุฏ ุดุจฺฉู Polygon: ~0.001-0.01 MATIC (ุจุณุชู ุจู ุชุฑุงูฺฉ ุดุจฺฉู)</li>
              <li>โฑ๏ธ ุฒูุงู ุชุงุฏ: 2-5 ุซุงูู (ูุนูููุงู)</li>
              <li>๐ ุชุฑุงฺฉูุดโูุง ุฏุฑ PolygonScan ูุงุจู ุฑุฏุงุจ ูุณุชูุฏ</li>
            </ul>
          </div>
          
          <div>
            <h4 style="color:#a786ff;margin-bottom:0.5rem;">๐ฏ ูฺฉุงุช ููู:</h4>
            <ul style="color:#b8c1ec;line-height:1.6;margin:0;padding-right:1rem;">
              <li>๐ฑ ูโุชูุงูุฏ ุจุง ุงูุฏฺฉุณ ฺฉุงุฑุจุฑ ุฌุณุชุฌู ฺฉูุฏ ุชุง ุขุฏุฑุณ ุฑุง ูพุฏุง ฺฉูุฏ</li>
              <li>๐ ูุจู ุงุฒ ุงูุชูุงูุ ููุฌูุฏ ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ</li>
              <li>โ๏ธ ููุฏุงุฑ ุงูุชูุงู + ฺฉุงุฑูุฒุฏ ุดุจฺฉู ุจุงุฏ ฺฉูุชุฑ ุงุฒ ููุฌูุฏ ุจุงุดุฏ</li>
              <li>๐ ุฏุฑ ุตูุฑุช ูุดฺฉู ุจุง ูพุดุชุจุงู ุชูุงุณ ุจฺฏุฑุฏ</li>
            </ul>
          </div>
        </div>
        
        <form id="transferForm" class="transfer-form">
          <div class="transfer-row">
            <label for="transferTo">ุขุฏุฑุณ ููุตุฏ:</label>
            <input type="text" id="transferTo" placeholder="0x..." required style="direction:ltr;">
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ุขุฏุฑุณ ฺฉู ูพูู ููุตุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ (42 ฺฉุงุฑุงฺฉุชุฑ)</small>
          </div>
          <div class="transfer-row" style="margin-bottom:0.5rem;">
            <label for="searchIndex">ุฌุณุชุฌู ุจุง ุงูุฏฺฉุณ:</label>
            <div style="display:flex;gap:0.5rem;align-items:center;">
              <input type="number" id="searchIndex" placeholder="ุงูุฏฺฉุณ ฺฉุงุฑุจุฑ" min="0" style="width:120px;direction:ltr;">
              <button type="button" id="searchIndexBtn" class="transfer-btn" style="padding:0.5rem 1.2rem;font-size:1rem;min-width:80px;">ุฌุณุชุฌู</button>
            </div>
            <div id="searchIndexStatus" class="transfer-status" style="margin-top:0.3rem;"></div>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ุงูุฏฺฉุณ ฺฉุงุฑุจุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ ุชุง ุขุฏุฑุณ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูพุฑ ุดูุฏ</small>
          </div>
          <div class="transfer-row">
            <label for="transferAmount">ููุฏุงุฑ:</label>
            <input type="number" id="transferAmount" placeholder="ููุฏุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ" min="0" step="any" required>
            <button type="button" id="maxAmountBtn" style="
              background: linear-gradient(90deg,#ff6b6b,#ee5a52);
              color: #fff;
              border: none;
              border-radius: 6px;
              padding: 0.4rem 0.8rem;
              font-size: 0.8rem;
              cursor: pointer;
              margin-top: 0.5rem;
              transition: all 0.3s ease;
              width: auto;
              display: inline-block;
            ">๐ฅ ุญุฏุงฺฉุซุฑ ููุฌูุฏ</button>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุฏุงุฑ ุงูุชูุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ ุง ุฑู "ุญุฏุงฺฉุซุฑ" ฺฉูฺฉ ฺฉูุฏ</small>
          </div>
          <div class="transfer-row" id="usd-converter-row" style="display:none;">
            <label for="transferUsdAmount">๐ฐ ูุนุงุฏู ุฏูุงุฑ (ููุท ุจุฑุง CPA):</label>
            <div style="display:flex;gap:0.5rem;align-items:center;">
              <span style="color:#00ff88;font-weight:bold;">$</span>
              <input type="number" id="transferUsdAmount" placeholder="5.00" min="0" step="0.01" style="flex:1;">
              <button type="button" id="usdToCpaBtn" style="
                background: linear-gradient(90deg,#00ff88,#a786ff);
                color: #181c2a;
                border: none;
                border-radius: 6px;
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
              ">๐ ุชุจุฏู</button>
            </div>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุฏุงุฑ ุฏูุงุฑ ูุงุฑุฏ ฺฉูุฏ ุชุง ุจู CPA ุชุจุฏู ุดูุฏ (ูุซู: 5 ุจุฑุง $5)</small>
          </div>
          <div class="transfer-row">
            <label for="transferToken">ููุน ุชูฺฉู:</label>
            <select id="transferToken" required>
              <option value="dai" selected>DAI</option>
              <option value="pol">POL</option>
              <option value="cpa">CPA</option>
            </select>
            <small style="color:#b8c1ec;font-size:0.85rem;margin-top:0.3rem;display:block;">ููุน ุชูฺฉู ููุฑุฏ ูุธุฑ ุจุฑุง ุงูุชูุงู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</small>
          </div>
          
          <!-- Balance Check -->
          <div style="background:rgba(167,134,255,0.1);border-radius:8px;padding:1rem;margin-bottom:1rem;" class="balance-check">
            <h4 style="color:#a786ff;margin-bottom:0.8rem;">๐ฐ ููุฌูุฏ ูุนู ุดูุง:</h4>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;">
              <div style="text-align:center;">
                <div style="color:#00ff88;font-weight:bold;">DAI</div>
                <div id="transfer-dai-balance" style="color:#b8c1ec;font-family:monospace;">-</div>
              </div>
              <div style="text-align:center;">
                <div style="color:#a786ff;font-weight:bold;">POL</div>
                <div id="transfer-poly-balance" style="color:#b8c1ec;font-family:monospace;">-</div>
              </div>
              <div style="text-align:center;">
                <div style="color:#00ccff;font-weight:bold;">CPA</div>
                <div id="transfer-cpa-balance" style="color:#b8c1ec;font-family:monospace;">-</div>
                <div id="transfer-cpa-usd" style="color:#a786ff;font-size:0.8rem;margin-top:2px;">-</div>
              </div>
            </div>
          </div>
          
          <button type="submit" class="transfer-btn">ุงูุชูุงู</button>
          <div id="transferStatus" class="transfer-status"></div>
        </form>
      </div>
    </div>
  </div>

  <!-- Network Section -->
  <div id="main-network" class="page-section expandable-container" style="width:100vw;max-width:none;margin:0;left:0;right:0;padding:0.5rem 0;display:none;">
    <div class="expand-header">
      <h2 style="color: #00ff88; margin: 0;">๐ Network</h2>
    </div>
    <div class="expand-content">
      <div class="network-container" style="max-width: 1200px; margin: 0 auto; padding: 1rem;">
        <!-- Network Stats -->
        <div id="network-stats" class="network-user-info-container"></div>
        
        <!-- Network Members List -->
        <div id="network-tree">
          <div style="color:#00ccff;text-align:center;padding:2rem;">
            ๐ ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ุฏุฑุฎุช ุดุจฺฉู...
            <br><br>
            <button onclick="window.initializeNetworkTab()" style="
              background: linear-gradient(135deg, #00ff88, #00cc66);
              color: #232946;
              border: none;
              padding: 0.8rem 1.5rem;
              border-radius: 8px;
              font-weight: bold;
              cursor: pointer;
              margin-top: 1rem;
            ">๐ ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- ููุงุด ูุถุนุช ุงุชุตุงู -->
  <div id="connection-status" style="
    display: none;
    margin: 0 1rem 1rem 1rem;
    padding: 1rem;
    border-radius: 12px;
    font-family: 'Nazanin', 'B Nazanin', 'BNazanin', Tahoma, Arial, sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    text-align: center;
  "></div>

      <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <!-- ุณุงุฑ ุงุณฺฉุฑูพุชโูุง -->
    <script src="js/firebase-config.js"></script>
    <script src="js/smooth-value-updater.js"></script>
    <script src="js/smart-dashboard-updater.js"></script>
    <script src="js/central-dashboard-updater.js"></script>
    <script src="js/test-address-config.js"></script>
    <script src="js/final-test-config.js"></script>
    <script src="js/dashboard-loading-manager.js"></script>
    <script src="js/config.js"></script>
  <script src="js/reports.js"></script>
  <script src="js/web3-interactions.js"></script>
  <script src="js/main.js"></script>
  <script src="js/network.js?v=5.7"></script>
  <script src="js/network-database.js?v=5.8"></script>
  <script src="js/profile.js?v=5.7"></script>
  <script src="js/news.js?v=5.7"></script>
  <script src="js/homepage.js?v=5.8"></script>
  <script src="js/price-history-manager.js?v=5.8"></script>
  <script src="js/price-chart.js?v=5.8"></script>
  <script src="js/point-chart.js?v=5.8"></script>
  <script src="js/price-charts-manager.js?v=5.8"></script>
  <script src="js/chart-testing-helper.js?v=1.0"></script>
  <script src="js/real-chart-validator.js?v=1.0"></script>

  <style>
    /* Fix for chart width issues */
    #price-chart-section {
      width: 100% !important;
      max-width: 100% !important;
      overflow-x: hidden !important;
    }
    
    #price-chart-canvas,
    #point-chart-canvas {
      width: 100% !important;
      max-width: 100% !important;
      height: 150px !important;
      box-sizing: border-box !important;
    }
    
    @media (max-width: 768px) {
      #price-chart-canvas,
      #point-chart-canvas {
        height: 120px !important;
      }
    }
    
    /* Transfer Status Styles */
    .transfer-status {
      margin-top: 1rem;
      padding: 0.8rem;
      border-radius: 8px;
      font-size: 0.9rem;
      text-align: center;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .transfer-status.success {
      background: rgba(0, 255, 136, 0.1);
      color: #00ff88;
      border: 1px solid rgba(0, 255, 136, 0.3);
    }
    
    .transfer-status.error {
      background: rgba(255, 68, 68, 0.1);
      color: #ff4444;
      border: 1px solid rgba(255, 68, 68, 0.3);
    }
    
    .transfer-status.loading {
      background: rgba(167, 134, 255, 0.1);
      color: #a786ff;
      border: 1px solid rgba(167, 134, 255, 0.3);
    }
    
    /* Transfer Form Improvements */
    .transfer-form {
      background: linear-gradient(135deg, #232946, #181c2a);
      border-radius: 12px;
      padding: 1.5rem;
      border: 2px solid #a786ff;
    }
    
    .transfer-row {
      margin-bottom: 1.5rem;
    }
    
    .transfer-row label {
      display: block;
      color: #a786ff;
      font-weight: bold;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }
    
    .transfer-row input,
    .transfer-row select {
      width: 100%;
      padding: 0.8rem;
      border-radius: 8px;
      border: 2px solid #a786ff;
      background: rgba(0, 0, 0, 0.2);
      color: #fff;
      font-size: 0.95rem;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    
    .transfer-row input:focus,
    .transfer-row select:focus {
      outline: none;
      border-color: #00ff88;
    }
    
    .transfer-btn {
      background: linear-gradient(90deg, #00ff88, #a786ff);
      color: #181c2a;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 1rem 2rem;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 1rem;
    }
    
    .transfer-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 255, 136, 0.3);
    }
    
    .transfer-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
  </style>
  
  <!-- ุชุนุฑู ูุชุบุฑูุง ููุฑุฏ ูุงุฒ ุจุฑุง ุณูุงูพ -->
  <script>
    // ุขุฏุฑุณ ูุฑุงุฑุฏุงุฏ DAI (DAI) ุฏุฑ ุดุจฺฉู Polygon
    window.DAI_ADDRESS = '0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063';
    
    // ABI ุณุงุฏู ุจุฑุง DAI (DAI)
    window.DAI_ABI = [
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          },
          {
            "internalType": "uint256",
            "name": "value",
            "type": "uint256"
          }
        ],
        "name": "approve",
        "outputs": [
          {
            "internalType": "bool",
            "name": "",
            "type": "bool"
          }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "owner",
            "type": "address"
          },
          {
            "internalType": "address",
            "name": "spender",
            "type": "address"
          }
        ],
        "name": "allowance",
        "outputs": [
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [
          {
            "internalType": "address",
            "name": "account",
            "type": "address"
          }
        ],
        "name": "balanceOf",
        "outputs": [
          {
            "internalType": "uint256",
            "name": "",
            "type": "uint256"
          }
        ],
        "stateMutability": "view",
        "type": "function"
      }
    ];
  </script>
  
  <script src="js/swap.js?v=5.7"></script>
  

 
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  
  <script>
    // ุฑุงูโุงูุฏุงุฒ ฺุงุฑุชโูุง ุจุนุฏ ุงุฒ ููุฏ Chart.js
    let chartsInitialized = false;
    
    function initializeCharts() {
      if (chartsInitialized) return;
      
      console.log('๐ ุชูุงุด ุจุฑุง ุฑุงูโุงูุฏุงุฒ ฺุงุฑุชโูุง...');
      console.log('Chart.js ูุถุนุช:', typeof Chart !== 'undefined' ? 'โ ุขูุงุฏู' : 'โ ูุงูุนููู');
      console.log('PriceChart ฺฉูุงุณ:', typeof PriceChart !== 'undefined' ? 'โ ุขูุงุฏู' : 'โ ูุงูุนููู');
      console.log('PointChart ฺฉูุงุณ:', typeof PointChart !== 'undefined' ? 'โ ุขูุงุฏู' : 'โ ูุงูุนููู');
      console.log('PriceChartsManager ฺฉูุงุณ:', typeof PriceChartsManager !== 'undefined' ? 'โ ุขูุงุฏู' : 'โ ูุงูุนููู');
      
      // ุจุฑุฑุณ canvas ูุง
      const priceCanvas = document.getElementById('price-chart-canvas');
      const pointCanvas = document.getElementById('point-chart-canvas');
      console.log('price-chart-canvas:', priceCanvas ? 'โ ููุฌูุฏ' : 'โ ุงูุช ูุดุฏ');
      console.log('point-chart-canvas:', pointCanvas ? 'โ ููุฌูุฏ' : 'โ ุงูุช ูุดุฏ');
      
      if (typeof Chart === 'undefined') {
        console.log('โณ ููุชุธุฑ ุจุงุฑฺฏุฐุงุฑ Chart.js...');
        setTimeout(initializeCharts, 500);
        return;
      }
      
      console.log('๐ Chart.js ุขูุงุฏู - ุฑุงูโุงูุฏุงุฒ ฺุงุฑุชโูุง...');
      
      // ุฑูุด ุงูู: ุงุณุชูุงุฏู ุงุฒ PriceChartsManager
      if (typeof PriceChartsManager !== 'undefined') {
        if (!window.priceChartsManager) {
          window.priceChartsManager = new PriceChartsManager();
        }
        
        setTimeout(async () => {
          try {
            await window.priceChartsManager.setupCharts();
            console.log('โ ฺุงุฑุชโูุง ุงุฒ ุทุฑู PriceChartsManager ุฑุงูโุงูุฏุงุฒ ุดุฏูุฏ');
            chartsInitialized = true;
          } catch (error) {
            console.error('โ ุฎุทุง ุฏุฑ ุฑุงูโุงูุฏุงุฒ ฺุงุฑุชโูุง ุจุง PriceChartsManager:', error);
            // fallback to manual initialization
            tryManualChartInit();
          }
        }, 1000);
      } else {
        console.warn('โ๏ธ ฺฉูุงุณ PriceChartsManager ูพุฏุง ูุดุฏ - ุณุน ุฏุฑ ุฑุงูโุงูุฏุงุฒ ุฏุณุช...');
        tryManualChartInit();
      }
    }
    
    // ุฑุงูโุงูุฏุงุฒ ุฏุณุช ฺุงุฑุชโูุง
    function tryManualChartInit() {
      console.log('๐ง ุชูุงุด ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุฏุณุช ฺุงุฑุชโูุง...');
      
      try {
        // ุฑุงูโุงูุฏุงุฒ ฺุงุฑุช ููุช ุชูฺฉู
        if (typeof PriceChart !== 'undefined' && document.getElementById('price-chart-canvas')) {
          const priceChart = new PriceChart();
          priceChart.init();
          console.log('โ ฺุงุฑุช ููุช ุชูฺฉู ุจู ุตูุฑุช ุฏุณุช ุฑุงูโุงูุฏุงุฒ ุดุฏ');
        }
        
        // ุฑุงูโุงูุฏุงุฒ ฺุงุฑุช ููุช ูพููุช
        if (typeof PointChart !== 'undefined' && document.getElementById('point-chart-canvas')) {
          const pointChart = new PointChart();
          pointChart.init();
          console.log('โ ฺุงุฑุช ููุช ูพููุช ุจู ุตูุฑุช ุฏุณุช ุฑุงูโุงูุฏุงุฒ ุดุฏ');
        }
        
        chartsInitialized = true;
        console.log('โ ุชูุงู ฺุงุฑุชโูุง ุจู ุตูุฑุช ุฏุณุช ุฑุงูโุงูุฏุงุฒ ุดุฏูุฏ');
      } catch (error) {
        console.error('โ ุฎุทุง ุฏุฑ ุฑุงูโุงูุฏุงุฒ ุฏุณุช ฺุงุฑุชโูุง:', error);
      }
    }
    
    // ุดุฑูุน ุฑุงูโุงูุฏุงุฒ
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(initializeCharts, 2000);
    });
    
    // backup initialization
    window.addEventListener('load', function() {
      setTimeout(() => {
        if (!chartsInitialized) {
          console.log('๐ backup initialization - ุชูุงุด ูุฌุฏุฏ...');
          initializeCharts();
        }
      }, 3000);
    });
  </script>
  
  <script>
    (async () => {
      const { contract, address } = await window.connectWallet();
      const user = await contract.users(address);
  
    })();
  </script>

  <script>
    async function updateAboutWalletsCount() {
      try {
        if (!window.contractConfig || !window.contractConfig.contract) {
          await window.connectWallet();
        }
        const contract = window.contractConfig.contract;
        if (contract && contract.wallets) {
          const walletsCount = await contract.wallets();
          document.getElementById('about-wallets-count').innerText = walletsCount.toString();
        } else {
          document.getElementById('about-wallets-count').innerText = '-';
        }
      } catch (e) {
        document.getElementById('about-wallets-count').innerText = '-';
      }
    }
    // Hook into tab switching
    const aboutBtn = document.getElementById('tab-about-btn');
    if (aboutBtn) {
      aboutBtn.addEventListener('click', updateAboutWalletsCount);
    }
  </script>

  <script>
    function toggleDashboardChart(chartId, btn) {
      const chartDiv = document.getElementById(chartId);
      if (!chartDiv) return;
      const isOpen = chartDiv.style.display === 'block';
      chartDiv.style.display = isOpen ? 'none' : 'block';
      btn.textContent = isOpen ? 'โผ' : 'โฒ';
      // Placeholder: Here you can load/render the chart if needed
    }
  </script>
  <!-- ููุฏุงู ุงูุฒูุฏู/ูุฑุงุด ุณุงุจ ุงุฏูู -->
  <div class="sub-admin-modal" id="sub-admin-modal">
    <div class="sub-admin-modal-content">
      <h3 id="modal-title">ุงูุฒูุฏู ุณุงุจ ุงุฏูู ุฌุฏุฏ</h3>
      <form class="sub-admin-form" id="sub-admin-form">
        <div class="form-group">
          <label for="sub-admin-name">ูุงู ุณุงุจ ุงุฏูู:</label>
          <input type="text" id="sub-admin-name" placeholder="ูุงู ฺฉุงูู ุณุงุจ ุงุฏูู" required>
        </div>
        
        <div class="form-group">
          <label for="sub-admin-address">ุขุฏุฑุณ ฺฉู ูพูู:</label>
          <input type="text" id="sub-admin-address" placeholder="0x..." required>
        </div>
        
        <div class="form-group">
          <label for="sub-admin-role">ููุด:</label>
          <select id="sub-admin-role" required>
            <option value="">ุงูุชุฎุงุจ ููุด</option>
            <option value="moderator">ูุฏุฑ ูุญุชูุง</option>
            <option value="support">ูพุดุชุจุงู</option>
            <option value="analyst">ุชุญููฺฏุฑ</option>
            <option value="teacher">ูุฏุฑุณ</option>
            <option value="custom">ุณูุงุฑุด</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="sub-admin-description">ุชูุถุญุงุช:</label>
          <textarea id="sub-admin-description" placeholder="ุชูุถุญุงุช ุงุถุงู..." rows="3"></textarea>
        </div>
        
        <div class="permissions-group">
          <h5>๐ ุฏุณุชุฑุณโูุง ุณุงุจ ุงุฏูู</h5>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-stream-control" name="permissions">
            <label for="perm-stream-control">ฺฉูุชุฑู ูุงู ุงุณุชุฑู</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-chat-moderate" name="permissions">
            <label for="perm-chat-moderate">ูุฏุฑุช ฺุช</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-ban-users" name="permissions">
            <label for="perm-ban-users">ูุณุฏูุฏ ฺฉุฑุฏู ฺฉุงุฑุจุฑุงู</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-view-reports" name="permissions">
            <label for="perm-view-reports">ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-manage-content" name="permissions">
            <label for="perm-manage-content">ูุฏุฑุช ูุญุชูุง</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-view-analytics" name="permissions">
            <label for="perm-view-analytics">ูุดุงูุฏู ุขูุงุฑ</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-edit-products" name="permissions">
            <label for="perm-edit-products">ูุฑุงุด ูุญุตููุงุช</label>
          </div>
          
          <div class="permission-item">
            <input type="checkbox" id="perm-view-orders" name="permissions">
            <label for="perm-view-orders">ูุดุงูุฏู ุณูุงุฑุดุงุช</label>
          </div>
        </div>
        
        <div class="modal-buttons">
          <button type="submit" class="modal-btn primary" id="save-sub-admin-btn">๐พ ุฐุฎุฑู</button>
          <button type="button" class="modal-btn secondary" id="cancel-sub-admin-btn">โ ุงูุตุฑุงู</button>
        </div>
      </form>
    </div>
  </div>

  <!-- ููุฏุงู ุชุฃุฏ ุญุฐู -->
  <div class="sub-admin-modal" id="delete-confirm-modal">
    <div class="sub-admin-modal-content">
      <h3>โ๏ธ ุชุฃุฏ ุญุฐู</h3>
      <p style="color: #ccc; text-align: center; margin-bottom: 1.5rem;">
        ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ ุงู ุณุงุจ ุงุฏูู ุฑุง ุญุฐู ฺฉูุฏุ
      </p>
      <div style="background: #181c2a; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
        <p style="color: #fff; margin: 0;"><strong>ูุงู:</strong> <span id="delete-admin-name"></span></p>
        <p style="color: #888; margin: 0.5rem 0 0 0;"><strong>ุขุฏุฑุณ:</strong> <span id="delete-admin-address"></span></p>
      </div>
      <div class="modal-buttons">
        <button class="modal-btn danger" id="confirm-delete-btn">๐๏ธ ุญุฐู</button>
        <button class="modal-btn secondary" id="cancel-delete-btn">โ ุงูุตุฑุงู</button>
      </div>
    </div>
  </div>



  <div id="custom-footer-div" style="text-align:center; padding:2rem; color:#00ff88; font-size:1.2rem;">
  <br>  <br>  <br>  <br>  <br>  <br>  <br>
  </div>


  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var archiveBtn = Array.from(document.querySelectorAll('button, a')).find(el => el.textContent.includes('ุขุฑุดู ุจุงุฒุงุฑูุง ูุงู'));
      if (archiveBtn) archiveBtn.remove();
      
      // ุจุงุฒุงุจ ุชุจ ูุนุงู ุงุฒ localStorage
      const savedTab = localStorage.getItem('currentActiveTab');
      if (savedTab && savedTab !== 'network' && typeof window.showTab === 'function') {
        // ฺฉู ุตุจุฑ ฺฉู ุชุง ุตูุญู ฺฉุงููุงู ููุฏ ุดูุฏ
        setTimeout(() => {
          window.showTab(savedTab);
        }, 1000);
      }
    });
  </script>

  <script>
  (async function() {
    if (window.getUserProfile) {
      const profile = await window.getUserProfile();
      if (!profile.activated) {
        // ููู ฺฉุฑุฏู ููุท ุจุฎุด ุฑูพูุฑุช
        const reportsSection = document.getElementById('main-reports');
        if (reportsSection) {
          reportsSection.innerHTML = '<div style="color:#ff6b6b;text-align:center;padding:3rem;font-size:1.5rem;">ุฏุณุชุฑุณ ุจู ุงู ุจุฎุด ููุท ุจุฑุง ฺฉุงุฑุจุฑุงู ูุนุงู ูุฌุงุฒ ุงุณุช.<br>๐</div>';
          reportsSection.style.background = '#181c2a';
        }
      }
    }
  })();
  </script>

  <!-- ฺฉูุชุฑู ููุงุด ูุฑูุฏ ุขุฏุฑุณ ููุตุฏ -->
  <script>
    // ุชุงุจุน ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ููุฌูุฏโูุง ุชุฑูุณูุฑ
    async function autoRefreshTransferBalances() {
      try {
        if (window.updateTransferBalancesOnConnect) {
          await window.updateTransferBalancesOnConnect();
          console.log('โ ููุฌูุฏโูุง ุชุฑูุณูุฑ ุฎูุฏฺฉุงุฑ ุจุฑูุฒุฑุณุงู ุดุฏ');
        }
      } catch (error) {
        console.warn('ุฎุทุง ุฏุฑ ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ููุฌูุฏโูุง ุชุฑูุณูุฑ:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      const transferForm = document.getElementById('transferForm');
      if (!transferForm) return;

      // ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ููุฌูุฏโูุง ููฺฏุงู ุจุงุฑฺฏุฐุงุฑ ุตูุญู
      const initTransferBalances = () => {
        if (window.contractConfig && window.contractConfig.contract) {
          autoRefreshTransferBalances();
        } else {
          // ุงูุชุธุงุฑ ุจุฑุง ุงุชุตุงู ฺฉู ูพูู
          const checkConnection = setInterval(() => {
            if (window.contractConfig && window.contractConfig.contract) {
              autoRefreshTransferBalances();
              clearInterval(checkConnection);
            }
          }, 1000);
          
          // ูุชููู ฺฉุฑุฏู ุจุฑุฑุณ ุจุนุฏ ุงุฒ 15 ุซุงูู
          setTimeout(() => clearInterval(checkConnection), 15000);
        }
      };

      // ุดุฑูุน ุจุฑูุฒุฑุณุงู
      initTransferBalances();

      // USD Converter functionality
      const usdConverterRow = document.getElementById('usd-converter-row');
      const transferUsdAmount = document.getElementById('transferUsdAmount');
      const usdToCpaBtn = document.getElementById('usdToCpaBtn');
      
      // ููุงุด/ูุฎู ฺฉุฑุฏู ููุฏ USD ุจุฑ ุงุณุงุณ ููุน ุชูฺฉู
      function toggleUsdConverter() {
        const selectedToken = transferTokenSelect.value;
        if (selectedToken === 'cpa') {
          usdConverterRow.style.display = 'block';
        } else {
          usdConverterRow.style.display = 'none';
          transferUsdAmount.value = '';
        }
      }
      
      // ุชุจุฏู USD ุจู CPA
      async function convertUsdToCpa() {
        const usdAmount = parseFloat(transferUsdAmount.value);
        if (isNaN(usdAmount) || usdAmount <= 0) {
          alert('ูุทูุงู ููุฏุงุฑ ูุนุชุจุฑ ุจุฑุง ุฏูุงุฑ ูุงุฑุฏ ฺฉูุฏ');
          return;
        }
        
        try {
          // ุฏุฑุงูุช ููุช ุชูฺฉู ุงุฒ smart contract
          const connection = await window.connectWallet();
          if (!connection || !connection.contract) {
            alert('ุงุจุชุฏุง ฺฉู ูพูู ุฎูุฏ ุฑุง ูุชุตู ฺฉูุฏ');
            return;
          }
          
          usdToCpaBtn.textContent = 'โณ ุฏุฑ ุญุงู ูุญุงุณุจู...';
          usdToCpaBtn.disabled = true;
          
          const tokenPriceRaw = await connection.contract.getTokenPrice();
          const tokenPrice = Number(ethers.formatUnits(tokenPriceRaw, 18));
          
          // ูุญุงุณุจู ููุฏุงุฑ CPA ููุฑุฏ ูุงุฒ
          const cpaAmount = (usdAmount / tokenPrice).toFixed(6);
          
          // ูุฑุงุฑ ุฏุงุฏู ููุฏุงุฑ ุฏุฑ ููุฏ ุงุตู
          transferAmountInput.value = cpaAmount;
          
          // ููุงุด ูพุงู ููููุช
          const statusDiv = document.getElementById('transferStatus');
          if (statusDiv) {
            statusDiv.innerHTML = `โ $${usdAmount} ูุนุงุฏู ${parseFloat(cpaAmount).toLocaleString('en-US', {maximumFractionDigits: 6})} CPA ุงุณุช`;
            statusDiv.style.color = '#00ff88';
            setTimeout(() => {
              statusDiv.innerHTML = '';
            }, 3000);
          }
          
        } catch (error) {
          console.error('ุฎุทุง ุฏุฑ ุชุจุฏู USD ุจู CPA:', error);
          alert('ุฎุทุง ุฏุฑ ุชุจุฏู. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ.');
        } finally {
          usdToCpaBtn.textContent = '๐ ุชุจุฏู';
          usdToCpaBtn.disabled = false;
        }
      }
      
      // ุฏฺฉูู ุญุฏุงฺฉุซุฑ
      const maxAmountBtn = document.getElementById('maxAmountBtn');
      const transferAmountInput = document.getElementById('transferAmount');
      const transferTokenSelect = document.getElementById('transferToken');

      if (maxAmountBtn && transferAmountInput && transferTokenSelect) {
        maxAmountBtn.addEventListener('click', function() {
          const selectedToken = transferTokenSelect.value;
          let maxAmount = '0';
          
          // ุฏุฑุงูุช ููุฌูุฏ ุจุฑ ุงุณุงุณ ุชูฺฉู ุงูุชุฎุงุจ ุดุฏู
          if (selectedToken === 'dai') {
            const daiBalanceEl = document.getElementById('transfer-dai-balance');
            if (daiBalanceEl) {
              const raw = parseFloat(daiBalanceEl.dataset.value || daiBalanceEl.textContent);
              if (!isNaN(raw) && raw > 0) maxAmount = raw.toString();
            }
          } else if (selectedToken === 'pol') {
            const polBalanceEl = document.getElementById('transfer-poly-balance');
            if (polBalanceEl) {
              const raw = parseFloat(polBalanceEl.dataset.value || polBalanceEl.textContent);
              if (!isNaN(raw)) {
                maxAmount = Math.max(0, raw - 0.01).toString();
              }
            }
          } else if (selectedToken === 'cpa') {
            const cpaBalanceEl = document.getElementById('transfer-cpa-balance');
            if (cpaBalanceEl) {
              const raw = parseFloat(cpaBalanceEl.dataset.value || cpaBalanceEl.textContent);
              if (!isNaN(raw) && raw > 0) maxAmount = raw.toString();
            }
          }
          
          // ุชูุธู ููุฏุงุฑ ุฏุฑ ููุฏ ูุฑูุฏ
          if (parseFloat(maxAmount) > 0) {
            const decimals = (transferTokenSelect.value === 'cpa') ? 6 : 18;
            // ุจุฑุง DAI ู POL ุจูุชุฑ ุงุณุช 2 ุง 4 ุฑูู ุงุณุชูุงุฏู ฺฉููุ ุจุฑุง CPA ุชุง 6 ุฑูู
            const floorToDecimals = (val, d) => { const m = Math.pow(10, d); return Math.floor(Number(val) * m) / m; };
            const d = (transferTokenSelect.value === 'cpa') ? 6 : 4;
            const floored = floorToDecimals(maxAmount, d);
            transferAmountInput.value = floored.toFixed(d);
            // ุชุบุฑ ูุชู ุฏฺฉูู ุจู ุตูุฑุช ูููุช
            const originalText = maxAmountBtn.textContent;
            maxAmountBtn.textContent = 'โ ุชูุธู ุดุฏ';
            maxAmountBtn.style.background = 'linear-gradient(90deg,#00ff88,#00cc66)';
            setTimeout(() => {
              maxAmountBtn.textContent = originalText;
              maxAmountBtn.style.background = 'linear-gradient(90deg,#ff6b6b,#ee5a52)';
            }, 1500);
          } else {
            // ููุงุด ูพุงู ุฎุทุง
            maxAmountBtn.textContent = 'โ ููุฌูุฏ ฺฉุงู ูุณุช';
            maxAmountBtn.style.background = 'linear-gradient(90deg,#666,#555)';
            setTimeout(() => {
              maxAmountBtn.textContent = 'ุญุฏุงฺฉุซุฑ';
              maxAmountBtn.style.background = 'linear-gradient(90deg,#ff6b6b,#ee5a52)';
            }, 2000);
          }
        });
      }
      
      // Event listeners ุจุฑุง USD converter
      if (transferTokenSelect) {
        // ุชุบุฑ ููุน ุชูฺฉู
        transferTokenSelect.addEventListener('change', toggleUsdConverter);
        
        // ุงุฌุฑุง ุงููู ุจุฑุง ุชูุธู ูุถุนุช ุงููู
        toggleUsdConverter();
      }
      
      if (usdToCpaBtn) {
        // ฺฉูฺฉ ุฏฺฉูู ุชุจุฏู
        usdToCpaBtn.addEventListener('click', convertUsdToCpa);
      }
      
      if (transferUsdAmount) {
        // Enter key ุฏุฑ ููุฏ USD
        transferUsdAmount.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            e.preventDefault();
            convertUsdToCpa();
          }
        });
        
        // Real-time ูุญุงุณุจู ููุช ฺฉุงุฑุจุฑ ุชุงูพ ูโฺฉูู
        let usdTimeout;
        transferUsdAmount.addEventListener('input', function() {
          clearTimeout(usdTimeout);
          usdTimeout = setTimeout(async () => {
            const usdAmount = parseFloat(transferUsdAmount.value);
            if (!isNaN(usdAmount) && usdAmount > 0) {
              try {
                const connection = await window.connectWallet();
                if (connection && connection.contract) {
                  const tokenPriceRaw = await connection.contract.getTokenPrice();
                  const tokenPrice = Number(ethers.formatUnits(tokenPriceRaw, 18));
                  const cpaAmount = (usdAmount / tokenPrice).toFixed(6);
                  
                  // ููุงุด preview ุฏุฑ placeholder
                  transferAmountInput.placeholder = `โ ${parseFloat(cpaAmount).toLocaleString('en-US', {maximumFractionDigits: 6})} CPA`;
                }
              } catch (e) {
                // ุฎุทุง ุฏุฑ real-time - ูุงุฏุฏู ุจฺฏุฑ
              }
            } else {
              transferAmountInput.placeholder = 'ููุฏุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ';
            }
          }, 500); // 500ms delay ุจุฑุง ุฌููฺฏุฑ ุงุฒ ฺฉุงูโูุง ุฒุงุฏ
        });
      }
      
      // Real-time ูุญุงุณุจู ูุนุงุฏู ุฏูุงุฑ ููุช ููุฏุงุฑ CPA ุชุบุฑ ูฺฉูู
      if (transferAmountInput) {
        let cpaTimeout;
        transferAmountInput.addEventListener('input', function() {
          if (transferTokenSelect.value === 'cpa') {
            clearTimeout(cpaTimeout);
            cpaTimeout = setTimeout(async () => {
              const cpaAmount = parseFloat(transferAmountInput.value);
              if (!isNaN(cpaAmount) && cpaAmount > 0) {
                try {
                  const connection = await window.connectWallet();
                  if (connection && connection.contract) {
                    const tokenPriceRaw = await connection.contract.getTokenPrice();
                    const tokenPrice = Number(ethers.formatUnits(tokenPriceRaw, 18));
                    const usdValue = (cpaAmount * tokenPrice).toFixed(2);
                    
                    // ููุงุด ูุนุงุฏู ุฏูุงุฑ ุฏุฑ ููุฏ USD
                    if (transferUsdAmount) {
                      transferUsdAmount.placeholder = `โ $${parseFloat(usdValue).toLocaleString('en-US', {maximumFractionDigits: 2})}`;
                    }
                  }
                } catch (e) {
                  // ุฎุทุง ุฏุฑ real-time - ูุงุฏุฏู ุจฺฏุฑ
                }
              } else {
                if (transferUsdAmount) {
                  transferUsdAmount.placeholder = '5.00';
                }
              }
            }, 500);
          }
        });
      }

      transferForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        const transferBtn = transferForm.querySelector('button[type="submit"]');
        if (transferBtn) {
          transferBtn.disabled = true;
          var oldText = transferBtn.textContent;
          transferBtn.textContent = 'ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด...';
        }
        const to = document.getElementById('transferTo').value.trim();
        const amount = parseFloat(document.getElementById('transferAmount').value);
        const token = document.getElementById('transferToken').value;
        const status = document.getElementById('transferStatus');
        status.textContent = '';
        status.className = 'transfer-status';
        if (!to || !amount || amount <= 0) {
          status.textContent = 'ุขุฏุฑุณ ููุตุฏ ู ููุฏุงุฑ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ';
          status.className = 'transfer-status error';
          if (transferBtn) { transferBtn.disabled = false; transferBtn.textContent = oldText; }
          return;
        }
        if (!window.contractConfig || !window.contractConfig.contract || !window.contractConfig.signer) {
          status.textContent = 'ุงุชุตุงู ฺฉู ูพูู ุจุฑูุฑุงุฑ ูุณุช';
          status.className = 'transfer-status error';
          if (transferBtn) { transferBtn.disabled = false; transferBtn.textContent = oldText; }
          return;
        }
        try {
          status.textContent = 'ุฏุฑ ุญุงู ุงุฑุณุงู...';
          status.className = 'transfer-status loading';
          if (token === 'pol') {
            // ุงูุชูุงู MATIC/POL
            const tx = await window.contractConfig.signer.sendTransaction({
              to,
              value: ethers.parseEther(amount.toString())
            });
            await tx.wait();
            status.textContent = 'ุงูุชูุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ!\nฺฉุฏ ุชุฑุงฺฉูุด: ' + tx.hash;
            status.className = 'transfer-status success';
          } else if (token === 'dai') {
            // ุงูุชูุงู DAI - ุชุตุญุญ decimal ุจู 18
            const daiContract = new ethers.Contract(DAI_ADDRESS, DAI_ABI, window.contractConfig.signer);
            const decimals = 18; // DAI has 18 decimals, not 6
            const parsedAmount = ethers.parseUnits(amount.toString(), decimals);
            const tx = await daiContract.transfer(to, parsedAmount);
            await tx.wait();
            status.textContent = 'ุงูุชูุงู DAI ุจุง ููููุช ุงูุฌุงู ุดุฏ!\nฺฉุฏ ุชุฑุงฺฉูุด: ' + tx.hash;
            status.className = 'transfer-status success';
          } else {
            // ุงูุชูุงู CPA
            const contract = window.contractConfig.contract;
            const tx = await contract.transfer(to, ethers.parseEther(amount.toString()));
            await tx.wait();
            status.textContent = 'ุงูุชูุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ!\nฺฉุฏ ุชุฑุงฺฉูุด: ' + tx.hash;
            status.className = 'transfer-status success';
          }
          transferForm.reset();
          
          // ุจุฑูุฒุฑุณุงู ููุฌูุฏโูุง ุจุนุฏ ุงุฒ ุงูุชูุงู ูููู
          setTimeout(autoRefreshTransferBalances, 2000);
        } catch (error) {
          let msg = error && error.message ? error.message : error;
          if (msg.includes('user rejected')) msg = 'ุชุฑุงฺฉูุด ุชูุณุท ฺฉุงุฑุจุฑ ูุบู ุดุฏ';
          else if (msg.includes('insufficient funds')) msg = 'ููุฌูุฏ ฺฉุงู ูุณุช';
          else if (msg.includes('invalid address')) msg = 'ุขุฏุฑุณ ููุตุฏ ูุงูุนุชุจุฑ ุงุณุช';
          else if (msg.includes('nonce')) msg = 'ุฎุทุง ุฏุฑ ุดูุงุฑู ุชุฑุงฺฉูุด. ูุทูุงู ุฏูุจุงุฑู ุชูุงุด ฺฉูุฏ';
          else if (msg.includes('execution reverted')) msg = 'ุชุฑุงฺฉูุด ูุงูููู ุจูุฏ. ูุทูุงู ุดุฑุงุท ุฑุง ุจุฑุฑุณ ฺฉูุฏ';
          else msg = 'ุฎุทุง ุฏุฑ ุงูุชูุงู: ' + msg;
          status.textContent = msg;
          status.className = 'transfer-status error';
        }
        if (transferBtn) { transferBtn.disabled = false; transferBtn.textContent = oldText; }
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const searchBtn = document.getElementById('searchIndexBtn');
      const searchInput = document.getElementById('searchIndex');
      const searchStatus = document.getElementById('searchIndexStatus');
      if (searchBtn && searchInput) {
        searchBtn.onclick = async function() {
          searchStatus.textContent = '';
          const idx = searchInput.value.trim();
          if (!idx || isNaN(idx) || Number(idx) < 0) {
            searchStatus.textContent = 'ุงูุฏฺฉุณ ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ';
            searchStatus.className = 'transfer-status error';
            return;
          }
          if (!window.contractConfig || !window.contractConfig.contract) {
            searchStatus.textContent = 'ุงุชุตุงู ฺฉู ูพูู ุจุฑูุฑุงุฑ ูุณุช';
            searchStatus.className = 'transfer-status error';
            return;
          }
          try {
            searchStatus.textContent = 'ุฏุฑ ุญุงู ุฌุณุชุฌู...';
            searchStatus.className = 'transfer-status loading';
            const contract = window.contractConfig.contract;
            const address = await contract.indexToAddress(BigInt(idx));
            if (!address || address === '0x0000000000000000000000000000000000000000') {
              searchStatus.textContent = 'ุขุฏุฑุณ ููุช ุจุฑุง ุงู ุงูุฏฺฉุณ ุงูุช ูุดุฏ';
              searchStatus.className = 'transfer-status error';
              document.getElementById('transferTo').value = '';
            } else {
              searchStatus.textContent = 'ุขุฏุฑุณ ููุช ูพุฏุง ุดุฏ';
              searchStatus.className = 'transfer-status success';
              document.getElementById('transferTo').value = address;
            }
          } catch (err) {
            searchStatus.textContent = 'ุฎุทุง ุฏุฑ ุฌุณุชุฌู: ' + (err && err.message ? err.message : err);
            searchStatus.className = 'transfer-status error';
            document.getElementById('transferTo').value = '';
          }
        };
      }
    });
  </script>

  <script>
    // ุชุงุจุน ุจุงุฒ/ุจุณุชู ฺฉุฑุฏู ุจุฎุดโูุง ูุงุจู ฺฏุณุชุฑุด
    function toggleExpandable(containerId) {
      const container = document.getElementById(containerId);
      if (container) {
        container.classList.toggle('collapsed');
        
        // ุฐุฎุฑู ูุถุนุช ุฏุฑ localStorage
        const isCollapsed = container.classList.contains('collapsed');
        localStorage.setItem(`expandable_${containerId}`, isCollapsed ? 'collapsed' : 'expanded');
      }
    }

    // ุจุงุฒุงุจ ูุถุนุช ุจุฎุดโูุง ูุงุจู ฺฏุณุชุฑุด ุงุฒ localStorage
    function restoreExpandableStates() {
      const expandableContainers = document.querySelectorAll('.expandable-container');
      expandableContainers.forEach(container => {
        const containerId = container.id;
        const savedState = localStorage.getItem(`expandable_${containerId}`);
        if (savedState === 'collapsed') {
          container.classList.add('collapsed');
        }
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      // ุจุงุฒุงุจ ูุถุนุช ุจุฎุดโูุง ูุงุจู ฺฏุณุชุฑุด
      restoreExpandableStates();
      
      
    });
  </script>

  <script>
    // ุชุงุจุน ููุงุด ููุช ุจุง ููุงุฏ ุนูู
    window.formatTokenPrice = function(priceWei) {
      if (!priceWei || priceWei === '0') return '0';
      let priceString = priceWei.toString();
      while (priceString.length < 18) priceString = '0' + priceString;
      if (priceString.length > 18) priceString = priceString.slice(-18);
      const result = '0.' + priceString;
      const numResult = parseFloat(result);
      if (numResult < 0.000001) {
        return numResult.toExponential(6);
      }
      return result;
    }

    // ุชุงุจุน ุจุฑูุฒุฑุณุงู ููุงุด ููุช
    async function updateTokenPriceDisplay() {
      try {
        if (!window.contractConfig || !window.contractConfig.contract) {
          await window.connectWallet();
          if (!window.contractConfig || !window.contractConfig.contract) {
            const el = document.getElementById('chart-lvl-usd');
            if (el) el.textContent = 'ุงุชุตุงู ูุงูููู';
            return;
          }
        }
        const contract = window.contractConfig.contract;
        const tokenPrice = await contract.getTokenPrice();
        const priceFormatted = window.formatTokenPrice(tokenPrice);
        const el = document.getElementById('chart-lvl-usd');
        if (el) el.textContent = priceFormatted;
        // ุจุฑูุฒุฑุณุงู point-value ุงุฒ ูุฑุงุฑุฏุงุฏ
        try {
          const pointValue = await contract.getPointValue();
          const pointValueNum = parseFloat(ethers.formatUnits(pointValue, 18));
          const pointValueFormatted = pointValueNum < 0.000001 ? pointValueNum.toExponential(6) : pointValueNum.toFixed(2);
          const el2 = document.getElementById('point-value');
          if (el2) el2.textContent = pointValueFormatted; // ุญุฐู ูพุณููุฏ CPA
        } catch (error) {
          // ...
        }
      } catch (error) {
        const el = document.getElementById('chart-lvl-usd');
        if (el) el.textContent = 'ุฎุทุง ุฏุฑ ุจุงุฑฺฏุฐุงุฑ';
      }
    }
    // ... existing code ...
  </script>

  <script>
    if (window.loadUserProfile) {
      const origLoadUserProfile = window.loadUserProfile;
      window.loadUserProfile = async function() {
        await origLoadUserProfile.apply(this, arguments);
        await updateProfileReferrer(); // ุงูุฌุง ุจุง await ู ุจุฏูู ุชุงุฎุฑ
      };
    }
  </script>
  <script src="js/token-price.js"></script>
  <script src="js/remove-archive-btn.js"></script>



  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const btn = document.getElementById('connectProfileWalletBtn');
    if (btn) {
      btn.addEventListener('click', async function() {
        try {
          if (window.connectWallet) {
            await window.connectWallet();
            // ูพุณ ุงุฒ ุงุชุตุงูุ ูพุฑููุงู ุฑุง ูุฌุฏุฏ ุจุงุฑฺฏุฐุงุฑ ฺฉู
            if (typeof loadUserProfile === 'function') loadUserProfile();
          }
        } catch (e) {
          alert('ุฎุทุง ุฏุฑ ุงุชุตุงู ฺฉู ูพูู: ' + (e.message || e));
        }
      });
    }
  });
  </script>

  <script src="js/navbar.js"></script>
  
  <!-- ููุฏุงุฑุฏู SwapManager -->
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      console.log('๐ ุดุฑูุน ููุฏุงุฑุฏู SwapManager...');
      
      // ุงุทููุงู ุงุฒ ุจุงุฑฺฏุฐุงุฑ swap.js
      if (typeof SwapManager !== 'undefined') {
        try {
          console.log('โ ฺฉูุงุณ SwapManager ุงูุช ุดุฏ');
          
          // ฺฉู ุตุจุฑ ฺฉู ุชุง DOM ฺฉุงููุงู ุจุงุฑฺฏุฐุงุฑ ุดูุฏ
          await new Promise(resolve => setTimeout(resolve, 1000));
          
          // ุจุฑุฑุณ ูุฌูุฏ ุนูุงุตุฑ ููุฑุฏ ูุงุฒ
          const requiredElements = ['swapForm', 'swapDirection', 'swapAmount', 'maxBtn', 'swapRate', 'swapPreview', 'swapLimitInfo', 'swapStatus'];
          const missingElements = requiredElements.filter(id => !document.getElementById(id));
          
          if (missingElements.length > 0) {
            console.warn('โ๏ธ ุนูุงุตุฑ ุฒุฑ ุงูุช ูุดุฏูุฏ:', missingElements);
            return;
          }
          
          console.log('โ ุชูุงู ุนูุงุตุฑ ููุฑุฏ ูุงุฒ ููุฌูุฏ ูุณุชูุฏ');
          
          // ุจุฑุฑุณ ูุฌูุฏ ูุชุบุฑูุง ููุฑุฏ ูุงุฒ
          if (!window.DAI_ADDRESS || !window.DAI_ABI) {
            console.error('โ ูุชุบุฑูุง DAI_ADDRESS ุง DAI_ABI ุชุนุฑู ูุดุฏูโุงูุฏ');
            return;
          }
          
          console.log('โ ูุชุบุฑูุง DAI ููุฌูุฏ ูุณุชูุฏ');
          
          // ุงุฌุงุฏ ููููู SwapManager
          window.swapManager = new SwapManager();
          console.log('โ ููููู SwapManager ุงุฌุงุฏ ุดุฏ');
          
          // ููุฏุงุฑุฏู ุงููู
          await window.swapManager.initializeSwap();
          console.log('โ SwapManager ุจุง ููููุช ููุฏุงุฑุฏู ุดุฏ');
          
        } catch (error) {
          console.error('โ ุฎุทุง ุฏุฑ ููุฏุงุฑุฏู SwapManager:', error);
        }
      } else {
        console.warn('โ๏ธ SwapManager ุชุนุฑู ูุดุฏู ุงุณุช - ูุงู swap.js ุจุงุฑฺฏุฐุงุฑ ูุดุฏู');
      }
    });
    
    // ููุฏุงุฑุฏู ูุฌุฏุฏ ุจุนุฏ ุงุฒ ุงุชุตุงู ฺฉู ูพูู
    if (window.connectWallet) {
      const originalConnectWallet = window.connectWallet;
      window.connectWallet = async function() {
        const result = await originalConnectWallet();
        
        // ููุฏุงุฑุฏู ูุฌุฏุฏ SwapManager ุจุนุฏ ุงุฒ ุงุชุตุงู
        setTimeout(async () => {
          if (window.swapManager && typeof window.swapManager.refreshSwapData === 'function') {
            try {
              console.log('๐ ุฑูุฑุด SwapManager ุจุนุฏ ุงุฒ ุงุชุตุงู ฺฉู ูพูู...');
              await window.swapManager.refreshSwapData();
              console.log('โ SwapManager ุฑูุฑุด ุดุฏ');
            } catch (error) {
              console.warn('โ๏ธ ุฎุทุง ุฏุฑ ุฑูุฑุด SwapManager:', error);
            }
          }
        }, 1000);
        
        return result;
      };
    }
  </script>
  </div>

<style>
/* ูุงู ุชูุฒ ุดุฏ - CSS ุฌุฏุฏ ุฏุฑ ุงูุชูุง ูุฑุงุฑ ุฏุงุฑุฏ */

/* === ููู ฺฉุงุฑุชโูุง ูฺฉุณ ุนุฑุถ ุฏุฑ ููุจุงู === */
@media (max-width: 768px) {
  /* ฺฉุงูุชูุฑ ุงุตู ฺฉุงุฑุชโูุง */
  div[style*="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;justify-content:center;"] {
    display: flex !important;
    flex-direction: column !important;
    gap: 0.8rem !important;
    width: 100% !important;
    padding: 0 0.5rem !important;
  }
  
  /* ููู ฺฉุงุฑุชโูุง ูฺฉุณ ุนุฑุถ ฺฉุงูู */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] {
    width: 100% !important;
    min-width: 100% !important;
    max-width: 100% !important;
    flex: none !important;
    padding: 1.2rem !important;
    margin: 0 !important;
    margin-bottom: 0.8rem !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 16px rgba(0,0,0,0.3) !important;
    backdrop-filter: blur(6px) !important;
    border: 1.5px solid rgba(255,255,255,0.15) !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
  }
  
  /* ุขฺฉููโูุง ฺฉุงุฑุช */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:1.2rem;margin-bottom:0.3rem;"] {
    font-size: 1.8rem !important;
    margin-bottom: 0.6rem !important;
    text-align: center !important;
  }
  
  /* ุนููุงู ฺฉุงุฑุชโูุง */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;"] {
    font-size: 1rem !important;
    margin-bottom: 0.4rem !important;
    letter-spacing: 0.3px !important;
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  /* ููุงุฏุฑ ฺฉุงุฑุชโูุง - ูฺฉุณ overflow */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.9rem;font-family:monospace;font-weight:bold;"] {
    font-size: 1.1rem !important;
    margin: 0.6rem 0 !important;
    letter-spacing: 0.2px !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.4) !important;
    text-align: center !important;
    word-break: break-all !important;
    overflow-wrap: break-word !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
  
  /* ุชูุถุญุงุช ฺฉุงุฑุชโูุง */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.7rem;margin-top:0.2rem;"] {
    font-size: 0.8rem !important;
    margin-top: 0.4rem !important;
    opacity: 0.7 !important;
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  /* ฺฉุงุฑุชโูุง ุฎุงุต - ุงูุฏุงุฒูโูุง ูฺู */
  
  /* ฺฉุงุฑุช ฺฉู ุนุฑุถู */
  div[style*="border:1px solid rgba(0,255,136,0.2)"] {
    border: 3px solid rgba(0,255,136,0.4) !important;
    background: rgba(0,255,136,0.1) !important;
  }
  
  /* ฺฉุงุฑุช ููุฌูุฏ ูุฑุงุฑุฏุงุฏ CPA */
  div[style*="border:1px solid rgba(255,193,7,0.2)"] {
    border: 3px solid rgba(255,193,7,0.4) !important;
    background: rgba(255,193,7,0.1) !important;
  }
  
  /* ฺฉุงุฑุช ููุฌูุฏ DAI */
  div[style*="border:1px solid rgba(0,123,255,0.2)"] {
    border: 3px solid rgba(0,123,255,0.4) !important;
    background: rgba(0,123,255,0.1) !important;
  }
  
  /* ฺฉุงุฑุช ููุช ุซุจุชโูุงู */
  div[style*="border:1px solid rgba(138,43,226,0.2)"] {
    border: 3px solid rgba(138,43,226,0.4) !important;
    background: rgba(138,43,226,0.1) !important;
  }
  
  /* ุงููุดู ูุฑูุฏ ฺฉุงุฑุชโูุง */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] {
    animation: slideUpMobile 0.6s ease-out !important;
    animation-delay: calc(var(--card-index, 0) * 0.1s) !important;
  }
}

/* ุงููุดู ูุฑูุฏ ฺฉุงุฑุชโูุง ุฏุฑ ููุจุงู */
@keyframes slideUpMobile {
  from {
    opacity: 0;
    transform: translateY(30px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ูุฎุตูุต ุตูุญุงุช ุฎู ฺฉูฺฺฉ */
@media (max-width: 480px) {
  /* ฺฉุงูุชูุฑ ฺฉุงุฑุชโูุง */
  div[style*="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;justify-content:center;"] {
    padding: 0 0.3rem !important;
    gap: 0.6rem !important;
  }
  
  /* ฺฉุงุฑุชโูุง */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] {
    padding: 1rem !important;
    margin-bottom: 0.6rem !important;
    border-radius: 10px !important;
  }
  
  /* ุขฺฉููโูุง */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:1.2rem;margin-bottom:0.3rem;"] {
    font-size: 1.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  /* ุนูุงูู */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.8rem;font-weight:bold;margin-bottom:0.2rem;"] {
    font-size: 0.9rem !important;
    margin-bottom: 0.3rem !important;
  }
  
  /* ููุงุฏุฑ */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.9rem;font-family:monospace;font-weight:bold;"] {
    font-size: 1rem !important;
    margin: 0.5rem 0 !important;
    line-height: 1.2 !important;
  }
  
  /* ุชูุถุญุงุช */
  div[style*="background:rgba(0,0,0,0.3);border-radius:12px;padding:0.8rem;border:1px solid"] > div[style*="font-size:0.7rem;margin-top:0.2rem;"] {
    font-size: 0.75rem !important;
    margin-top: 0.3rem !important;
  }
}
</style>

<script>
// ูุฏุฑุช ฺฉุงุฑุชโูุง ู ููุงุฏุฑ ุฏุฑ ููุจุงู
function optimizeCardsForMobile() {
  if (window.innerWidth <= 768) {
    // ูพุฏุง ฺฉุฑุฏู ููู ฺฉุงุฑุชโูุง
    const cards = document.querySelectorAll('div[style*="background:rgba(0,0,0,0.3)"]');
    
    cards.forEach((card, index) => {
      // ูฺฉุณ ฺฉุฑุฏู ุนุฑุถ
      card.style.width = '100%';
      card.style.maxWidth = '100%';
      card.style.minWidth = '100%';
      card.style.boxSizing = 'border-box';
      card.style.overflow = 'hidden';
      
      // ุงููุดู ูุฑูุฏ
      card.style.setProperty('--card-index', index.toString());
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      
      // ุชุงุฎุฑ ุจุฑุง ุงููุดู
      setTimeout(() => {
        card.style.transition = 'all 0.4s ease';
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, index * 80);
      
      // ุจูููโุณุงุฒ ููุงุฏุฑ ุฏุงุฎู ฺฉุงุฑุช
      const valueElements = card.querySelectorAll('div[style*="font-family:monospace"]');
      valueElements.forEach(valueEl => {
        valueEl.style.wordBreak = 'break-all';
        valueEl.style.overflowWrap = 'break-word';
        valueEl.style.maxWidth = '100%';
        valueEl.style.textAlign = 'center';
        
        // ุงฺฏุฑ ููุฏุงุฑ ุฎู ุจููุฏ ุงุณุชุ ูููุช ุฑุง ฺฉูฺฺฉโุชุฑ ฺฉู
        const text = valueEl.textContent || '';
        if (text.length > 15) {
          valueEl.style.fontSize = '0.9rem';
          valueEl.style.lineHeight = '1.2';
        }
        if (text.length > 25) {
          valueEl.style.fontSize = '0.8rem';
          valueEl.style.lineHeight = '1.1';
        }
      });
    });
    
    // ุจูููโุณุงุฒ ฺฉุงูุชูุฑ ุงุตู
    const container = document.querySelector('div[style*="display:flex;flex-wrap:wrap"]');
    if (container) {
      container.style.width = '100%';
      container.style.padding = '0 0.5rem';
      container.style.boxSizing = 'border-box';
    }
  }
}

// ูุฏุฑุช ุฏฺฉูู ุฑูุฑุด ููุจุงู
document.addEventListener('DOMContentLoaded', function() {
  // ุจูููโุณุงุฒ ฺฉุงุฑุชโูุง ุจุฑุง ููุจุงู
  setTimeout(() => {
    optimizeCardsForMobile();
  }, 800);
  
  // ุจูููโุณุงุฒ ูุฌุฏุฏ ููฺฏุงู ุชุบุฑ ุงูุฏุงุฒู ุตูุญู
  let resizeTimeout;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(() => {
      optimizeCardsForMobile();
    }, 300);
  });
  
  // ุจูููโุณุงุฒ ูุฌุฏุฏ ููฺฏุงู ุจุฑูุฒุฑุณุงู ููุงุฏุฑ
  const observer = new MutationObserver(() => {
    if (window.innerWidth <= 768) {
      setTimeout(optimizeCardsForMobile, 200);
    }
  });
  
  // ูุธุงุฑุช ุจุฑ ุชุบุฑุงุช ุฏุฑ ฺฉุงุฑุชโูุง
  const targetNode = document.querySelector('div[style*="display:flex;flex-wrap:wrap"]');
  if (targetNode) {
    observer.observe(targetNode, {
      childList: true,
      subtree: true,
      characterData: true
    });
  }
  
  // ฺฉุฏูุง ุงุตู ุตูุญู
});



// ูพุงุงู ุงุณฺฉุฑูพุชโูุง ุงุตู

</script>

<!-- Floating Token Growth Card - ฺฉุงุฑุช ุดูุงูุฑ ุฑุดุฏ ุชูฺฉู -->
<script src="js/floating-token-card.js"></script>

</body>
</html>