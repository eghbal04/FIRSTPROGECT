# سیستم چارت‌های جداگانه IAM Terminal

## 📊 بررسی کلی

سیستم چارت‌های جداگانه برای نمایش تاریخچه قیمت‌های توکن IAM و پوینت‌ها به صورت مستقل طراحی شده است. هر چارت دارای کنترل‌های جداگانه و نمایش مستقل است.

## 🏗️ ساختار فایل‌ها

### `js/price-chart.js`
کلاس چارت قیمت توکن IAM:
```javascript
class PriceChart {
    // چارت قیمت توکن با رنگ سبز
    // کنترل‌های token-time-*
    // نمایش تاریخچه توکن
}
```

### `js/point-chart.js`
کلاس چارت قیمت پوینت:
```javascript
class PointChart {
    // چارت قیمت پوینت با رنگ بنفش
    // کنترل‌های point-time-*
    // نمایش تاریخچه پوینت
}
```

### `js/price-history-manager.js`
مدیریت مرکزی تاریخچه:
```javascript
class PriceHistoryManager {
    // مدیریت تاریخچه هر دو نوع قیمت
    // ذخیره و بازیابی از localStorage
    // به‌روزرسانی خودکار
}
```

## 🎨 طراحی رابط کاربری

### چارت توکن IAM
- **رنگ**: سبز (#00ff88)
- **عنوان**: "Token Price Chart"
- **کنترل‌ها**: token-time-day, token-time-week, token-time-month, token-time-year
- **داده**: تاریخچه قیمت توکن

### چارت پوینت
- **رنگ**: بنفش (#a786ff)
- **عنوان**: "Point Value Chart"
- **کنترل‌ها**: point-time-day, point-time-week, point-time-month, point-time-year
- **داده**: تاریخچه قیمت پوینت

## 🔧 قابلیت‌ها

### 1. چارت‌های مستقل
- **کنترل جداگانه**: هر چارت دوره زمانی خود را دارد
- **رنگ‌بندی متمایز**: سبز برای توکن، بنفش برای پوینت
- **به‌روزرسانی مستقل**: هر چارت به‌طور مستقل به‌روزرسانی می‌شود

### 2. نمایش قیمت‌های فعلی
```
Token Price: 0.000123 IAM
Point Value: 0.000045 IAM
```

### 3. آمار جداگانه
```
Token Min: 0.000100 | Token Max: 0.000150
Point Min: 0.000040 | Point Max: 0.000050
```

### 4. کنترل‌های جداگانه
#### چارت توکن:
- **Token: Day (24h)** - نمایش 24 ساعت
- **Token: Week (7d)** - نمایش 7 روز
- **Token: Month (30d)** - نمایش 30 روز
- **Token: Year (12m)** - نمایش 12 ماه

#### چارت پوینت:
- **Point: Day (24h)** - نمایش 24 ساعت
- **Point: Week (7d)** - نمایش 7 روز
- **Point: Month (30d)** - نمایش 30 روز
- **Point: Year (12m)** - نمایش 12 ماه

### 5. کنترل‌های عمومی
- **🗑️ Clear History** - پاک کردن تاریخچه هر دو چارت

## 🔄 به‌روزرسانی خودکار

### تایمرها
- **قیمت توکن**: هر 30 ثانیه
- **قیمت پوینت**: هر 30 ثانیه
- **آمار**: با تغییر دوره زمانی هر چارت

### هماهنگی
- **تاریخچه مشترک**: هر دو چارت از یک منبع داده استفاده می‌کنند
- **به‌روزرسانی همزمان**: تغییرات در هر دو چارت اعمال می‌شود
- **آمار مستقل**: هر چارت آمار دوره زمانی خود را نمایش می‌دهد

## 📊 ساختار داده

### تاریخچه مشترک
```javascript
{
    tokenPriceHistory: {
        day: Array(24),    // 24 ساعت
        week: Array(7),    // 7 روز
        month: Array(30),  // 30 روز
        year: Array(12)    // 12 ماه
    },
    pointPriceHistory: {
        day: Array(24),    // 24 ساعت
        week: Array(7),    // 7 روز
        month: Array(30),  // 30 روز
        year: Array(12)    // 12 ماه
    }
}
```

## 🚀 استفاده

### راه‌اندازی خودکار
```javascript
// در DOMContentLoaded
window.priceChart = new PriceChart();      // چارت توکن
window.pointChart = new PointChart();      // چارت پوینت
window.priceHistoryManager = new PriceHistoryManager();
```

### کنترل چارت توکن
```javascript
// تغییر دوره زمانی چارت توکن
window.priceChart.switchTimePeriod('week');

// به‌روزرسانی چارت توکن
window.priceChart.updatePrice();
```

### کنترل چارت پوینت
```javascript
// تغییر دوره زمانی چارت پوینت
window.pointChart.switchTimePeriod('month');

// به‌روزرسانی چارت پوینت
window.pointChart.updatePrice();
```

### مدیریت تاریخچه
```javascript
// به‌روزرسانی هر دو قیمت
await window.priceHistoryManager.updateTokenPrice();
await window.priceHistoryManager.updatePointPrice();

// پاک کردن تاریخچه
window.priceHistoryManager.clearHistory();
```

## 🎯 ویژگی‌های کلیدی

### 1. استقلال چارت‌ها
- هر چارت دوره زمانی خود را دارد
- تغییر دوره یک چارت روی چارت دیگر تأثیر نمی‌گذارد
- رنگ‌بندی و استایل مستقل

### 2. مدیریت مرکزی داده
- یک منبع داده برای هر دو چارت
- ذخیره‌سازی مشترک در localStorage
- به‌روزرسانی همزمان داده‌ها

### 3. رابط کاربری بهینه
- نمایش واضح و متمایز هر چارت
- کنترل‌های جداگانه و مشخص
- آمار مستقل برای هر چارت

### 4. عملکرد بهینه
- به‌روزرسانی خودکار هر 30 ثانیه
- فقط قیمت‌های واقعی تا زمان فعلی
- فرمت علمی برای اعداد کوچک

## 📱 رابط کاربری

### چیدمان
```
┌─────────────────────────────────────┐
│ Token Price: 0.000123 | Point: 0.000045 │
├─────────────────────────────────────┤
│ Token Price Chart                   │
│ [Chart Canvas]                      │
├─────────────────────────────────────┤
│ Point Value Chart                   │
│ [Chart Canvas]                      │
├─────────────────────────────────────┤
│ Token Min: 0.000100 | Token Max: 0.000150 │
│ Point Min: 0.000040 | Point Max: 0.000050 │
├─────────────────────────────────────┤
│ Token: [Day] [Week] [Month] [Year]  │
│ Point: [Day] [Week] [Month] [Year]  │
├─────────────────────────────────────┤
│ [🗑️ Clear History]                  │
└─────────────────────────────────────┘
```

### رنگ‌بندی
- **توکن**: سبز (#00ff88) - نماد رشد و سود
- **پوینت**: بنفش (#a786ff) - نماد ارزش و کیفیت
- **کنترل‌ها**: رنگ‌بندی متناسب با هر چارت
- **آمار**: رنگ‌بندی متمایز برای هر نوع

## 🔧 تنظیمات

### تغییر فاصله به‌روزرسانی
```javascript
// تغییر به 60 ثانیه برای هر دو چارت
window.priceChart.startPriceUpdates(60000);
window.pointChart.startPriceUpdates(60000);
```

### تنظیم رنگ‌ها
```javascript
// تغییر رنگ چارت توکن
window.priceChart.chart.data.datasets[0].borderColor = '#newColor';

// تغییر رنگ چارت پوینت
window.pointChart.chart.data.datasets[0].borderColor = '#newColor';
```

### تنظیم اندازه
```javascript
// تغییر ارتفاع چارت‌ها
document.getElementById('price-chart-canvas').style.height = '150px';
document.getElementById('point-chart-canvas').style.height = '150px';
```

## 📝 نکات مهم

1. **استقلال چارت‌ها**: هر چارت دوره زمانی خود را دارد
2. **داده مشترک**: هر دو چارت از یک منبع داده استفاده می‌کنند
3. **به‌روزرسانی همزمان**: تغییرات در هر دو چارت اعمال می‌شود
4. **رنگ‌بندی متمایز**: سبز برای توکن، بنفش برای پوینت
5. **کنترل‌های جداگانه**: هر چارت کنترل‌های مخصوص خود را دارد

## 🐛 عیب‌یابی

### مشکل عدم نمایش چارت
1. بررسی وجود canvas elements
2. بررسی بارگذاری Chart.js
3. بررسی console برای خطاها

### مشکل عدم هماهنگی
1. بررسی PriceHistoryManager
2. بررسی به‌روزرسانی همزمان
3. بررسی دوره‌های زمانی

### مشکل رنگ‌بندی
1. بررسی CSS styles
2. بررسی تنظیمات Chart.js
3. بررسی کلاس‌های active

## 🔮 توسعه آینده

- [ ] چارت مقایسه‌ای توکن و پوینت
- [ ] نمودار ترکیبی (overlay)
- [ ] تحلیل همبستگی قیمت‌ها
- [ ] هشدار تغییرات قیمت
- [ ] صادرات داده‌ها
- [ ] تنظیمات پیشرفته چارت‌ها 