<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ | CONTINUOUS PROFIT ACADEMY</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/hamburger-menu.css">
  
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ethers.js Ù†Ø³Ø®Ù‡ 6 Ø§Ø² CDN -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.10.0/dist/ethers.umd.min.js"></script>
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ WalletConnect Provider Ø§Ø² CDN Ø±Ø³Ù…ÛŒ -->
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ WalletConnect Handler -->
  <script src="js/walletconnect-handler.js?v=5.7"></script>
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ WalletConnect UMD Ø¨Ù‡ ØµÙˆØ±Øª Ù„ÙˆÚ©Ø§Ù„ -->
  <script src="js/walletconnect-v1.8.0.js"></script>
  
  <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ -->
  <script src="js/config.js"></script>
  <script src="js/web3-interactions.js"></script>
  <script src="js/main.js"></script>
  
  <style>
    body {
      background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 50%, #2d3748 100%);
      color: #e2e8f0;
      font-family: 'Noto Sans Arabic', sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    
    .utility-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }
    
    .utility-header {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(167,134,255,0.1) 100%);
      border-radius: 20px;
      border: 1px solid rgba(0,255,136,0.2);
    }
    
    .utility-header h1 {
      font-size: 2.5rem;
      margin: 0 0 1rem 0;
      background: linear-gradient(45deg, #00ff88, #a786ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .utility-header p {
      font-size: 1.1rem;
      color: #a0aec0;
      margin: 0;
    }
    
    .utility-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    .utility-card {
      background: linear-gradient(135deg, rgba(35,41,70,0.8) 0%, rgba(45,55,72,0.8) 100%);
      border: 1px solid rgba(0,255,136,0.2);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 8px 32px rgba(0,255,136,0.1);
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }
    
    .utility-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(0,255,136,0.2);
      border-color: rgba(0,255,136,0.4);
    }
    
    .utility-card h3 {
      font-size: 1.5rem;
      margin: 0 0 1rem 0;
      color: #00ff88;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .utility-card .icon {
      font-size: 1.8rem;
    }
    
    .utility-card p {
      color: #a0aec0;
      margin: 0 0 1.5rem 0;
      line-height: 1.6;
    }
    
    .utility-features {
      list-style: none;
      padding: 0;
      margin: 0 0 1.5rem 0;
    }
    
    .utility-features li {
      padding: 0.5rem 0;
      color: #cbd5e0;
      position: relative;
      padding-right: 1.5rem;
    }
    
    .utility-features li::before {
      content: 'âœ“';
      position: absolute;
      right: 0;
      color: #00ff88;
      font-weight: bold;
    }
    
    .utility-actions {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .utility-btn {
      background: linear-gradient(45deg, #00ff88, #00cc6a);
      color: #1a202c;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      flex: 1;
    }
    
    .utility-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,255,136,0.3);
    }
    
    .utility-btn.secondary {
      background: linear-gradient(45deg, #a786ff, #8b5cf6);
      color: white;
    }
    
    .calculator-section {
      background: rgba(0,255,136,0.05);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid rgba(0,255,136,0.1);
    }
    
    .calculator-section h4 {
      color: #00ff88;
      margin: 0 0 1rem 0;
      font-size: 1.2rem;
    }
    
    .calculator-input {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid rgba(0,255,136,0.3);
      border-radius: 8px;
      background: rgba(26,32,44,0.8);
      color: #e2e8f0;
      font-size: 1rem;
      margin-bottom: 1rem;
      box-sizing: border-box;
    }
    
    .calculator-input:focus {
      outline: none;
      border-color: #00ff88;
      box-shadow: 0 0 0 3px rgba(0,255,136,0.1);
    }
    
    .calculator-result {
      background: rgba(0,255,136,0.1);
      border: 1px solid rgba(0,255,136,0.2);
      border-radius: 8px;
      padding: 1rem;
      margin-top: 1rem;
      color: #e2e8f0;
      font-family: 'Fira Mono', monospace;
      word-break: break-all;
    }
    
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-left: 0.5rem;
    }
    
    .status-online {
      background: #00ff88;
      box-shadow: 0 0 10px rgba(0,255,136,0.5);
    }
    
    .status-offline {
      background: #ff4757;
      box-shadow: 0 0 10px rgba(255,71,87,0.5);
    }
    
    @media (max-width: 768px) {
      .utility-grid {
        grid-template-columns: 1fr;
      }
      
      .utility-actions {
        flex-direction: column;
      }
      
      .utility-header h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="utility-container">
    <!-- Ø¯Ú©Ù…Ù‡ Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ -->
    <div style="text-align: center; margin-bottom: 2rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 12px; border: 1px solid rgba(0,255,136,0.2);">
      <h3 style="color: #00ff88; margin-bottom: 1rem;">ğŸ”— Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„</h3>
      <p style="color: #a0aec0; margin-bottom: 1rem;">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ùˆ Ø§ÛŒÙ†Ø¯Ú©Ø³ØŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ù…ØªØµÙ„ Ú©Ù†ÛŒØ¯</p>
      <button id="connect-wallet-btn" class="utility-btn" style="max-width: 300px;" onclick="connectWalletForUtility()">
        ğŸ”— Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„
      </button>
      <div id="wallet-status" style="margin-top: 1rem; padding: 0.5rem; border-radius: 8px; display: none;"></div>
    </div>
    
    <div class="utility-header">
      <h1>ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</h1>
      <p>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙÛŒØ¯ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ØªØ± Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø´Ù…Ø§</p>
    </div>
    
    <div class="utility-grid">
      <!-- Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø³ÙˆØ¯ -->
      <div class="utility-card">
        <h3><span class="icon">ğŸ’°</span>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø³ÙˆØ¯</h3>
        <p>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯ Ùˆ Ø²ÛŒØ§Ù† Ù…Ø¹Ø§Ù…Ù„Ø§Øª ÙØ§Ø±Ú©Ø³</p>
        <ul class="utility-features">
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ù¾ÛŒÙ¾</li>
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø§Ø±Ø¬ÛŒÙ† Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²</li>
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø±ÛŒØ³Ú© Ø¨Ù‡ Ø±ÛŒÙˆØ§Ø±Ø¯</li>
          <li>Ù†Ù…Ø§ÛŒØ´ Ø¯Ø±ØµØ¯ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†</li>
        </ul>
        <div class="calculator-section">
          <h4>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ø±ÛŒØ¹ Ø³ÙˆØ¯</h4>
          <input type="number" class="calculator-input" id="lot-size" placeholder="Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ù‡ (Ù„Ø§Øª)" step="0.01" min="0.01">
          <input type="number" class="calculator-input" id="pip-value" placeholder="Ø§Ø±Ø²Ø´ Ù¾ÛŒÙ¾" step="0.01" min="0.01">
          <input type="number" class="calculator-input" id="pip-movement" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒÙ¾" step="1">
          <button class="utility-btn" onclick="calculateProfit()" style="width: 100%;">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†</button>
          <div class="calculator-result" id="profit-result" style="display: none;"></div>
        </div>
      </div>

      <!-- ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ùˆ Ø§ÛŒÙ†Ø¯Ú©Ø³ -->
      <div class="utility-card">
        <h3><span class="icon">ğŸ”„</span>ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ùˆ Ø§ÛŒÙ†Ø¯Ú©Ø³</h3>
        <p>ØªØ¨Ø¯ÛŒÙ„ Ø¨ÛŒÙ† Ø§ÛŒÙ†Ø¯Ú©Ø³ Ú©Ø§Ø±Ø¨Ø± Ùˆ Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„</p>
        <ul class="utility-features">
          <li>ØªØ¨Ø¯ÛŒÙ„ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ù‡ Ø¢Ø¯Ø±Ø³</li>
          <li>ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ø¨Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³</li>
          <li>Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø±ÛŒØ¹ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</li>
          <li>ØªØ£ÛŒÛŒØ¯ Ø§Ø¹ØªØ¨Ø§Ø± Ø¢Ø¯Ø±Ø³â€ŒÙ‡Ø§</li>
        </ul>
        <div class="calculator-section">
          <h4>ØªØ¨Ø¯ÛŒÙ„ Ø³Ø±ÛŒØ¹</h4>
          <div style="margin-bottom: 1.5rem;">
            <h5 style="color: #a786ff; margin-bottom: 0.5rem;">ğŸ“Š Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ù‡ Ø¢Ø¯Ø±Ø³</h5>
            <input type="number" class="calculator-input" id="index-input" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ú©Ø§Ø±Ø¨Ø±" min="0">
            <button class="utility-btn" onclick="convertIndexToAddress()" style="width: 100%;">ØªØ¨Ø¯ÛŒÙ„</button>
            <div class="calculator-result" id="index-result" style="display: none;"></div>
          </div>
          <div style="margin-bottom: 1.5rem;">
            <h5 style="color: #a786ff; margin-bottom: 0.5rem;">ğŸ‘¤ Ø¢Ø¯Ø±Ø³ Ø¨Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³</h5>
            <input type="text" class="calculator-input" id="address-input" placeholder="Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„ (0x...)" style="direction: ltr;">
            <button class="utility-btn" onclick="convertAddressToIndex()" style="width: 100%;">ØªØ¨Ø¯ÛŒÙ„</button>
            <div class="calculator-result" id="address-result" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± ØªØ¹Ø¯Ø§Ø¯ ÙˆÙ„Øªâ€ŒÙ‡Ø§ -->
      <div class="utility-card">
        <h3><span class="icon">ğŸ“Š</span>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± Ø´Ø¨Ú©Ù‡</h3>
        <p>Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª Ùˆ Ú†Ù¾ Ø´Ø¨Ú©Ù‡</p>
        <ul class="utility-features">
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª</li>
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ú†Ù¾</li>
          <li>Ù†Ù…Ø§ÛŒØ´ Ù†Ø³Ø¨Øªâ€ŒÙ‡Ø§</li>
          <li>ØªØ­Ù„ÛŒÙ„ ØªØ¹Ø§Ø¯Ù„ Ø´Ø¨Ú©Ù‡</li>
        </ul>
        <div class="calculator-section">
          <h4>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ø±ÛŒØ¹</h4>
          <input type="number" class="calculator-input" id="total-wallets" placeholder="ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡" min="1">
          <input type="number" class="calculator-input" id="right-percentage" placeholder="Ø¯Ø±ØµØ¯ Ø³Ù…Øª Ø±Ø§Ø³Øª" min="0" max="100" step="0.1">
          <button class="utility-btn" onclick="calculateWalletDistribution()" style="width: 100%;">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
          <div class="calculator-result" id="wallet-result" style="display: none;"></div>
        </div>
      </div>

      <!-- Ù…Ø¨Ø¯Ù„ Ø§Ø±Ø² -->
      <div class="utility-card">
        <h3><span class="icon">ğŸ’±</span>Ù…Ø¨Ø¯Ù„ Ø§Ø±Ø²</h3>
        <p>ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ù‡ ÛŒÚ©Ø¯ÛŒÚ¯Ø±</p>
        <ul class="utility-features">
          <li>ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ</li>
          <li>Ù†Ø±Ø®â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ²</li>
          <li>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ø±ÛŒØ¹</li>
          <li>Ù†Ù…Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ù†Ø±Ø®â€ŒÙ‡Ø§</li>
        </ul>
        <div class="calculator-section">
          <h4>ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²</h4>
          <input type="number" class="calculator-input" id="currency-amount" placeholder="Ù…Ø¨Ù„Øº" min="0" step="0.01">
          <select class="calculator-input" id="from-currency">
            <option value="USD">Ø¯Ù„Ø§Ø± Ø¢Ù…Ø±ÛŒÚ©Ø§ (USD)</option>
            <option value="EUR">ÛŒÙˆØ±Ùˆ (EUR)</option>
            <option value="GBP">Ù¾ÙˆÙ†Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ (GBP)</option>
            <option value="JPY">ÛŒÙ† Ú˜Ø§Ù¾Ù† (JPY)</option>
            <option value="IRR">Ø±ÛŒØ§Ù„ Ø§ÛŒØ±Ø§Ù† (IRR)</option>
          </select>
          <select class="calculator-input" id="to-currency">
            <option value="EUR">ÛŒÙˆØ±Ùˆ (EUR)</option>
            <option value="USD">Ø¯Ù„Ø§Ø± Ø¢Ù…Ø±ÛŒÚ©Ø§ (USD)</option>
            <option value="GBP">Ù¾ÙˆÙ†Ø¯ Ø§Ù†Ú¯Ù„ÛŒØ³ (GBP)</option>
            <option value="JPY">ÛŒÙ† Ú˜Ø§Ù¾Ù† (JPY)</option>
            <option value="IRR">Ø±ÛŒØ§Ù„ Ø§ÛŒØ±Ø§Ù† (IRR)</option>
          </select>
          <button class="utility-btn" onclick="convertCurrency()" style="width: 100%;">ØªØ¨Ø¯ÛŒÙ„</button>
          <div class="calculator-result" id="currency-result" style="display: none;"></div>
        </div>
      </div>
    </div>

    <!-- ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ -->
    <div class="utility-card" style="margin-top: 2rem;">
      <h3><span class="icon">ğŸ“¡</span>ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§</h3>
      <p>ÙˆØ¶Ø¹ÛŒØª Ø¢Ù†Ù„Ø§ÛŒÙ† Ø¨ÙˆØ¯Ù† Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ù¾Ù„ØªÙØ±Ù…</p>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
        <div style="display: flex; align-items: center; padding: 0.5rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
          <span class="status-indicator status-online"></span>
          <span style="margin-right: 0.5rem;">Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ</span>
        </div>
        <div style="display: flex; align-items: center; padding: 0.5rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
          <span class="status-indicator status-online"></span>
          <span style="margin-right: 0.5rem;">Ø¨Ù„Ø§Ú©Ú†ÛŒÙ†</span>
        </div>
        <div style="display: flex; align-items: center; padding: 0.5rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
          <span class="status-indicator status-online"></span>
          <span style="margin-right: 0.5rem;">Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</span>
        </div>
        <div style="display: flex; align-items: center; padding: 0.5rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
          <span class="status-indicator status-online"></span>
          <span style="margin-right: 0.5rem;">API</span>
        </div>
      </div>
      <div style="text-align: center; margin-top: 1rem; color: #a0aec0; font-size: 0.9rem;">
        Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="status-time"></span>
      </div>
    </div>
  </div>

  <script>
    // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³ÙˆØ¯
    function calculateProfit() {
      const lotSize = parseFloat(document.getElementById('lot-size').value);
      const pipValue = parseFloat(document.getElementById('pip-value').value);
      const pipMovement = parseFloat(document.getElementById('pip-movement').value);
      
      if (!lotSize || !pipValue || !pipMovement) {
        alert('Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯');
        return;
      }
      
      const profit = lotSize * pipValue * pipMovement;
      const resultDiv = document.getElementById('profit-result');
      
      resultDiv.innerHTML = `
        <strong>Ù†ØªÛŒØ¬Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡:</strong><br>
        Ø­Ø¬Ù… Ù…Ø¹Ø§Ù…Ù„Ù‡: ${lotSize} Ù„Ø§Øª<br>
        Ø§Ø±Ø²Ø´ Ù¾ÛŒÙ¾: ${pipValue}<br>
        ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒÙ¾: ${pipMovement}<br>
        <strong style="color: ${profit >= 0 ? '#00ff88' : '#ff4757'}">
          Ø³ÙˆØ¯/Ø²ÛŒØ§Ù†: ${profit >= 0 ? '+' : ''}${profit.toFixed(2)}
        </strong>
      `;
      resultDiv.style.display = 'block';
    }

    // ØªØ¨Ø¯ÛŒÙ„ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ù‡ Ø¢Ø¯Ø±Ø³
    async function convertIndexToAddress() {
      const index = parseInt(document.getElementById('index-input').value);
      
      if (!index || index < 0) {
        alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø§ÛŒÙ†Ø¯Ú©Ø³ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
      }
      
      const resultDiv = document.getElementById('index-result');
      resultDiv.innerHTML = 'Ø¯Ø± Ø­Ø§Ù„ ØªØ¨Ø¯ÛŒÙ„...';
      resultDiv.style.display = 'block';
      
      try {
        // ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯
        if (window.connectWallet && typeof window.connectWallet === 'function') {
          await window.connectWallet();
          if (window.contractConfig && window.contractConfig.contract) {
            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ABI mapping Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø¨Ù‡ Ø¢Ø¯Ø±Ø³
            const address = await window.contractConfig.contract.indexToAddress(index);
            resultDiv.innerHTML = `
              <strong>Ù†ØªÛŒØ¬Ù‡:</strong><br>
              Ø§ÛŒÙ†Ø¯Ú©Ø³: ${index}<br>
              Ø¢Ø¯Ø±Ø³: ${address}<br>
              <button onclick="copyToClipboard('${address}')" style="background: #00ff88; color: #1a202c; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; margin-top: 0.5rem;">Ú©Ù¾ÛŒ Ø¢Ø¯Ø±Ø³</button>
            `;
          } else {
            throw new Error('Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
          }
        } else {
          throw new Error('Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ù†ÛŒØ³Øª');
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <strong>Ø®Ø·Ø§:</strong><br>
          ${error.message}<br>
          <small style="color: #a0aec0;">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØªØŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ù…ØªØµÙ„ Ú©Ù†ÛŒØ¯</small>
        `;
      }
    }

    // ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ø¨Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³
    async function convertAddressToIndex() {
      const address = document.getElementById('address-input').value.trim();
      
      if (!address || !address.startsWith('0x')) {
        alert('Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ø¢Ø¯Ø±Ø³ Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
      }
      
      const resultDiv = document.getElementById('address-result');
      resultDiv.innerHTML = 'Ø¯Ø± Ø­Ø§Ù„ ØªØ¨Ø¯ÛŒÙ„...';
      resultDiv.style.display = 'block';
      
      try {
        if (window.connectWallet && typeof window.connectWallet === 'function') {
          await window.connectWallet();
          if (window.contractConfig && window.contractConfig.contract) {
            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ABI mapping Ø¨Ø±Ø§ÛŒ ØªØ¨Ø¯ÛŒÙ„ Ø¢Ø¯Ø±Ø³ Ø¨Ù‡ Ø§ÛŒÙ†Ø¯Ú©Ø³
            // Ø§Ø¨ØªØ¯Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø§Ø² mapping users Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
            const userData = await window.contractConfig.contract.users(address);
            const index = userData.index;
            
            if (index && index > 0) {
              resultDiv.innerHTML = `
                <strong>Ù†ØªÛŒØ¬Ù‡:</strong><br>
                Ø¢Ø¯Ø±Ø³: ${address}<br>
                Ø§ÛŒÙ†Ø¯Ú©Ø³: ${index.toString()}<br>
                <button onclick="copyToClipboard('${index.toString()}')" style="background: #00ff88; color: #1a202c; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; margin-top: 0.5rem;">Ú©Ù¾ÛŒ Ø§ÛŒÙ†Ø¯Ú©Ø³</button>
              `;
            } else {
              resultDiv.innerHTML = `
                <strong>Ù†ØªÛŒØ¬Ù‡:</strong><br>
                Ø¢Ø¯Ø±Ø³: ${address}<br>
                <span style="color: #ffa502;">Ø§ÛŒÙ† Ø¢Ø¯Ø±Ø³ Ø¯Ø± Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</span>
              `;
            }
          } else {
            throw new Error('Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
          }
        } else {
          throw new Error('Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ù†ÛŒØ³Øª');
        }
      } catch (error) {
        resultDiv.innerHTML = `
          <strong>Ø®Ø·Ø§:</strong><br>
          ${error.message}<br>
          <small style="color: #a0aec0;">Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØªØŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ù…ØªØµÙ„ Ú©Ù†ÛŒØ¯</small>
        `;
      }
    }

    // Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙˆØ²ÛŒØ¹ ÙˆÙ„Øªâ€ŒÙ‡Ø§
    function calculateWalletDistribution() {
      const totalWallets = parseInt(document.getElementById('total-wallets').value);
      const rightPercentage = parseFloat(document.getElementById('right-percentage').value);
      
      if (!totalWallets || !rightPercentage || rightPercentage < 0 || rightPercentage > 100) {
        alert('Ù„Ø·ÙØ§Ù‹ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
      }
      
      const rightWallets = Math.round((totalWallets * rightPercentage) / 100);
      const leftWallets = totalWallets - rightWallets;
      const leftPercentage = 100 - rightPercentage;
      
      const resultDiv = document.getElementById('wallet-result');
      resultDiv.innerHTML = `
        <strong>Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ù‡:</strong><br>
        ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ ÙˆÙ„Øªâ€ŒÙ‡Ø§: ${totalWallets.toLocaleString()}<br>
        ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ø±Ø§Ø³Øª: ${rightWallets.toLocaleString()} (${rightPercentage}%)<br>
        ÙˆÙ„Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ú†Ù¾: ${leftWallets.toLocaleString()} (${leftPercentage}%)<br>
        <div style="margin-top: 1rem; padding: 0.5rem; background: ${Math.abs(rightPercentage - 50) < 10 ? 'rgba(0,255,136,0.1)' : 'rgba(255,71,87,0.1)'}; border-radius: 5px;">
          <strong style="color: ${Math.abs(rightPercentage - 50) < 10 ? '#00ff88' : '#ff4757'}">
            ÙˆØ¶Ø¹ÛŒØª ØªØ¹Ø§Ø¯Ù„: ${Math.abs(rightPercentage - 50) < 10 ? 'Ù…ØªØ¹Ø§Ø¯Ù„' : 'Ù†Ø§Ù…ØªØ¹Ø§Ø¯Ù„'}
          </strong>
        </div>
      `;
      resultDiv.style.display = 'block';
    }

    // ØªØ¨Ø¯ÛŒÙ„ Ø§Ø±Ø²
    function convertCurrency() {
      const amount = parseFloat(document.getElementById('currency-amount').value);
      const fromCurrency = document.getElementById('from-currency').value;
      const toCurrency = document.getElementById('to-currency').value;
      
      if (!amount || amount <= 0) {
        alert('Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯');
        return;
      }
      
      if (fromCurrency === toCurrency) {
        alert('Ø§Ø±Ø² Ù…Ø¨Ø¯Ø§ Ùˆ Ù…Ù‚ØµØ¯ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÛŒÚ©Ø³Ø§Ù† Ø¨Ø§Ø´Ø¯');
        return;
      }
      
      // Ù†Ø±Ø®â€ŒÙ‡Ø§ÛŒ ØªÙ‚Ø±ÛŒØ¨ÛŒ (Ø¯Ø± Ø­Ø§Ù„Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§ÛŒØ¯ Ø§Ø² API Ø¯Ø±ÛŒØ§ÙØª Ø´ÙˆØ¯)
      const rates = {
        'USD': { 'EUR': 0.85, 'GBP': 0.73, 'JPY': 110, 'IRR': 420000 },
        'EUR': { 'USD': 1.18, 'GBP': 0.86, 'JPY': 129, 'IRR': 495000 },
        'GBP': { 'USD': 1.37, 'EUR': 1.16, 'JPY': 150, 'IRR': 575000 },
        'JPY': { 'USD': 0.009, 'EUR': 0.0077, 'GBP': 0.0067, 'IRR': 3820 },
        'IRR': { 'USD': 0.0000024, 'EUR': 0.000002, 'GBP': 0.0000017, 'JPY': 0.00026 }
      };
      
      const rate = rates[fromCurrency][toCurrency];
      const convertedAmount = amount * rate;
      
      const resultDiv = document.getElementById('currency-result');
      resultDiv.innerHTML = `
        <strong>Ù†ØªÛŒØ¬Ù‡ ØªØ¨Ø¯ÛŒÙ„:</strong><br>
        ${amount.toLocaleString()} ${fromCurrency} = ${convertedAmount.toLocaleString()} ${toCurrency}<br>
        <small style="color: #a0aec0;">Ù†Ø±Ø® ØªÙ‚Ø±ÛŒØ¨ÛŒ: 1 ${fromCurrency} = ${rate.toLocaleString()} ${toCurrency}</small>
      `;
      resultDiv.style.display = 'block';
    }

    // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert('Ú©Ù¾ÛŒ Ø´Ø¯!');
      }).catch(() => {
        // Fallback Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Ú©Ù¾ÛŒ Ø´Ø¯!');
      });
    }

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø²Ù…Ø§Ù† ÙˆØ¶Ø¹ÛŒØª
    function updateStatusTime() {
      const now = new Date();
      const timeString = now.toLocaleString('fa-IR');
      document.getElementById('status-time').textContent = timeString;
    }

    // ØªØ§Ø¨Ø¹ Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§
    async function connectWalletForUtility() {
      const connectBtn = document.getElementById('connect-wallet-btn');
      const statusDiv = document.getElementById('wallet-status');
      
      try {
        connectBtn.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§ØªØµØ§Ù„...';
        connectBtn.disabled = true;
        
        if (window.connectWallet && typeof window.connectWallet === 'function') {
          const connection = await window.connectWallet();
          
          if (connection && connection.address) {
            statusDiv.innerHTML = `
              <div style="color: #00ff88; background: rgba(0,255,136,0.1); padding: 0.8rem; border-radius: 6px;">
                âœ… Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù…ØªØµÙ„ Ø´Ø¯<br>
                <small>Ø¢Ø¯Ø±Ø³: ${connection.address.substring(0, 6)}...${connection.address.substring(38)}</small>
              </div>
            `;
            connectBtn.textContent = 'âœ… Ù…ØªØµÙ„ Ø´Ø¯';
            connectBtn.style.background = 'linear-gradient(45deg, #00ff88, #00cc6a)';
          } else {
            throw new Error('Ø§ØªØµØ§Ù„ Ù†Ø§Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯');
          }
        } else {
          throw new Error('ØªØ§Ø¨Ø¹ Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
        }
      } catch (error) {
        statusDiv.innerHTML = `
          <div style="color: #ff4757; background: rgba(255,71,87,0.1); padding: 0.8rem; border-radius: 6px;">
            âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: ${error.message}
          </div>
        `;
        connectBtn.textContent = 'ğŸ”— Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„';
        connectBtn.disabled = false;
      }
    }

    // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
    function checkWalletConnection() {
      const statusDiv = document.getElementById('wallet-status');
      const connectBtn = document.getElementById('connect-wallet-btn');
      
      if (window.contractConfig && window.contractConfig.address) {
        statusDiv.innerHTML = `
          <div style="color: #00ff88; background: rgba(0,255,136,0.1); padding: 0.8rem; border-radius: 6px;">
            âœ… Ú©ÛŒÙ Ù¾ÙˆÙ„ Ù‚Ø¨Ù„Ø§Ù‹ Ù…ØªØµÙ„ Ø§Ø³Øª<br>
            <small>Ø¢Ø¯Ø±Ø³: ${window.contractConfig.address.substring(0, 6)}...${window.contractConfig.address.substring(38)}</small>
          </div>
        `;
        connectBtn.textContent = 'âœ… Ù…ØªØµÙ„ Ø´Ø¯';
        connectBtn.style.background = 'linear-gradient(45deg, #00ff88, #00cc6a)';
        connectBtn.disabled = true;
      }
    }

    // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
    document.addEventListener('DOMContentLoaded', function() {
      const cards = document.querySelectorAll('.utility-card');
      cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
          card.style.transition = 'all 0.5s ease';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, index * 100);
      });
      
      updateStatusTime();
      setInterval(updateStatusTime, 60000); // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡
      
      // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„ Ú©ÛŒÙ Ù¾ÙˆÙ„
      setTimeout(checkWalletConnection, 1000);
    });
  </script>
  
  <!-- Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø§ÙˆØ¨Ø§Ø± -->
  <script src="js/navbar.js"></script>
</body>
</html> 